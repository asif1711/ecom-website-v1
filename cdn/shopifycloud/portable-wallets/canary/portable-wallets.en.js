var Fn=Object.defineProperty,qn=Object.defineProperties,jn=Object.getOwnPropertyDescriptors,Yt=Object.getOwnPropertySymbols,Vn=Object.prototype.hasOwnProperty,Gn=Object.prototype.propertyIsEnumerable,Zt=(t,e)=>{if(e=Symbol[t])return e;throw Error("Symbol."+t+" is not defined")},gt=(t,e,n)=>e in t?Fn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_=(t,e)=>{for(var n in e||(e={}))Vn.call(e,n)&&gt(t,n,e[n]);if(Yt)for(var n of Yt(e))Gn.call(e,n)&&gt(t,n,e[n]);return t},U=(t,e)=>qn(t,jn(e)),w=(t,e,n)=>(gt(t,typeof e!="symbol"?e+"":e,n),n),bt=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},j=(t,e,n)=>(bt(t,e,"read from private field"),n?n.call(t):e.get(t)),re=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},Jt=(t,e,n,r)=>(bt(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),qe=(t,e,n)=>(bt(t,e,"access private method"),n),$=function(t,e){this[0]=t,this[1]=e},ne=(t,e,n)=>{var r=(i,s,c,u)=>{try{var l=n[i](s),m=(s=l.value)instanceof $,f=l.done;Promise.resolve(m?s[0]:s).then(p=>m?r(i==="return"?i:"next",s[1]?{done:p.done,value:p.value}:p,c,u):c({value:p,done:f})).catch(p=>r("throw",p,c,u))}catch(p){u(p)}},o=i=>a[i]=s=>new Promise((c,u)=>r(i,s,c,u)),a={};return n=n.apply(t,e),a[Symbol.asyncIterator]=()=>a,o("next"),o("throw"),o("return"),a},pe=(t,e,n)=>(e=t[Zt("asyncIterator")])?e.call(t):(t=t[Zt("iterator")](),e={},n=(r,o)=>(o=t[r])&&(e[r]=a=>new Promise((i,s,c)=>(a=o.call(t,a),c=a.done,Promise.resolve(a.value).then(u=>i({value:u,done:c}),s)))),n("next"),n("return"),e);const Hn=":host{display:flex;align-items:center;justify-content:center}\n";class Wn extends HTMLElement{constructor(){var e,n;super(),w(this,"size"),w(this,"color"),this.size=(e=this.getAttribute("size"))!=null?e:"1.5rem",this.color=(n=this.getAttribute("color"))!=null?n:"gray",this.attachShadow({mode:"open"})}connectedCallback(){this.render();const e=document.createElement("style");e.textContent=Hn,this.shadowRoot.appendChild(e)}render(){const e=this.shadowRoot,n='\n      width="'.concat(this.size,'"\n      height="').concat(this.size,'"\n      xmlns="http://www.w3.org/2000/svg"\n      aria-hidden="true"\n    ');switch(this.getAttribute("name")){case"warning":e.innerHTML="\n          <svg ".concat(n,' viewBox="0 0 16 14" fill="').concat(this.color,'">\n            <path d="M5.925 2.344c1.146-1.889 3.002-1.893 4.149 0l4.994 8.235c1.146 1.889.288 3.421-1.916 3.421h-10.305c-2.204 0-3.063-1.529-1.916-3.421l4.994-8.235zm1.075 1.656v5h2v-5h-2zm0 6v2h2v-2h-2z"/>\n          </svg>\n        ');break;case"close":e.innerHTML="\n          <svg ".concat(n,' viewBox="0 0 20 20" fill="').concat(this.color,'">\n            <path d="M17.1 4.3l-1.4-1.4-5.7 5.7-5.7-5.7-1.4 1.4 5.7 5.7-5.7 5.7 1.4 1.4 5.7-5.7 5.7 5.7 1.4-1.4-5.7-5.7z"/>\n          </svg>\n        ');break;default:e.innerHTML="";break}}}const Kn="#overlay{position:fixed;width:100%;height:100%;background:rgba(0,0,0,.4);top:0;left:0;z-index:2147483647;animation:modalPop .3s ease-out}#modal{position:fixed;top:1em;left:50%;width:100%;max-width:460px;transform:translate(-50%,-100%);background:#fff;color:#000;border:1px solid #d0d0d0;border-radius:4px;animation:modalSlideInFromTop .3s forwards}@keyframes modalPop{0%{opacity:0}to{opacity:1}}@keyframes modalSlideInFromTop{0%{transform:translate(-50%,-100%)}to{transform:translate(-50%)}}@keyframes modalSlideInFromBottom{0%{transform:translate(-50%,100%)}to{transform:translate(-50%)}}@media only screen and (max-width: 640px){#modal{top:auto;bottom:0;animation:modalSlideInFromBottom .3s forwards}}#modal header,#modal footer{padding:1em}#modal header{display:flex;margin-bottom:2em;text-align:center;border-bottom:1px solid #d0d0d0}#title{flex-grow:2;display:flex;justify-content:center;font-weight:700}#title svg-icon{margin-right:.25em}#content{text-align:left;padding:0 1em 1em;overflow:auto;max-height:84vh}#modal #content p{margin:0}#close-icon,#close-button{cursor:pointer}#close-icon{background:transparent;padding:0;border:none}#close-button{width:100%;padding:1em;color:#fff;background-color:#1773b0;border:none;border-radius:4px}#close-button:hover,#close-button:active{background:#136f99}#close-button:active,#close-button:focus{box-shadow:0 0 0 4px #1990c640}\n";var Lr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Yn(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var o=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return t[r]}})}),n}var xr={exports:{}},vt={exports:{}},Qt;function Zn(){return Qt||(Qt=1,function(t,e){(function(n,r){t.exports=r()})(Lr,function(){function n(d){return!isNaN(parseFloat(d))&&isFinite(d)}function r(d){return d.charAt(0).toUpperCase()+d.substring(1)}function o(d){return function(){return this[d]}}var a=["isConstructor","isEval","isNative","isToplevel"],i=["columnNumber","lineNumber"],s=["fileName","functionName","source"],c=["args"],u=["evalOrigin"],l=a.concat(i,s,c,u);function m(d){if(d)for(var h=0;h<l.length;h++)d[l[h]]!==void 0&&this["set"+r(l[h])](d[l[h]])}m.prototype={getArgs:function(){return this.args},setArgs:function(d){if(Object.prototype.toString.call(d)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=d},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(d){if(d instanceof m)this.evalOrigin=d;else if(d instanceof Object)this.evalOrigin=new m(d);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var d=this.getFileName()||"",h=this.getLineNumber()||"",y=this.getColumnNumber()||"",v=this.getFunctionName()||"";return this.getIsEval()?d?"[eval] ("+d+":"+h+":"+y+")":"[eval]:"+h+":"+y:v?v+" ("+d+":"+h+":"+y+")":d+":"+h+":"+y}},m.fromString=function(d){var h=d.indexOf("("),y=d.lastIndexOf(")"),v=d.substring(0,h),g=d.substring(h+1,y).split(","),A=d.substring(y+1);if(A.indexOf("@")===0)var T=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(A,""),N=T[1],L=T[2],q=T[3];return new m({functionName:v,args:g||void 0,fileName:N,lineNumber:L||void 0,columnNumber:q||void 0})};for(var f=0;f<a.length;f++)m.prototype["get"+r(a[f])]=o(a[f]),m.prototype["set"+r(a[f])]=function(d){return function(h){this[d]=!!h}}(a[f]);for(var p=0;p<i.length;p++)m.prototype["get"+r(i[p])]=o(i[p]),m.prototype["set"+r(i[p])]=function(d){return function(h){if(!n(h))throw new TypeError(d+" must be a Number");this[d]=Number(h)}}(i[p]);for(var b=0;b<s.length;b++)m.prototype["get"+r(s[b])]=o(s[b]),m.prototype["set"+r(s[b])]=function(d){return function(h){this[d]=String(h)}}(s[b]);return m})}(vt)),vt.exports}(function(t,e){(function(n,r){t.exports=r(Zn())})(Lr,function(n){var r=/(^|@)\S+:\d+/,o=/^\s*at .*(\S+:\d+|\(native\))/m,a=/^(eval@)?(\[native code])?$/;return{parse:function(i){if(typeof i.stacktrace<"u"||typeof i["opera#sourceloc"]<"u")return this.parseOpera(i);if(i.stack&&i.stack.match(o))return this.parseV8OrIE(i);if(i.stack)return this.parseFFOrSafari(i);throw new Error("Cannot parse given Error object")},extractLocation:function(i){if(i.indexOf(":")===-1)return[i];var s=/(.+?)(?::(\d+))?(?::(\d+))?$/,c=s.exec(i.replace(/[()]/g,""));return[c[1],c[2]||void 0,c[3]||void 0]},parseV8OrIE:function(i){var s=i.stack.split("\n").filter(function(c){return!!c.match(o)},this);return s.map(function(c){c.indexOf("(eval ")>-1&&(c=c.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));var u=c.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),l=u.match(/ (\(.+\)$)/);u=l?u.replace(l[0],""):u;var m=this.extractLocation(l?l[1]:u),f=l&&u||void 0,p=["eval","<anonymous>"].indexOf(m[0])>-1?void 0:m[0];return new n({functionName:f,fileName:p,lineNumber:m[1],columnNumber:m[2],source:c})},this)},parseFFOrSafari:function(i){var s=i.stack.split("\n").filter(function(c){return!c.match(a)},this);return s.map(function(c){if(c.indexOf(" > eval")>-1&&(c=c.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),c.indexOf("@")===-1&&c.indexOf(":")===-1)return new n({functionName:c});var u=/((.*".+"[^@]*)?[^@]*)(?:@)/,l=c.match(u),m=l&&l[1]?l[1]:void 0,f=this.extractLocation(c.replace(u,""));return new n({functionName:m,fileName:f[0],lineNumber:f[1],columnNumber:f[2],source:c})},this)},parseOpera:function(i){return!i.stacktrace||i.message.indexOf("\n")>-1&&i.message.split("\n").length>i.stacktrace.split("\n").length?this.parseOpera9(i):i.stack?this.parseOpera11(i):this.parseOpera10(i)},parseOpera9:function(i){for(var s=/Line (\d+).*script (?:in )?(\S+)/i,c=i.message.split("\n"),u=[],l=2,m=c.length;l<m;l+=2){var f=s.exec(c[l]);f&&u.push(new n({fileName:f[2],lineNumber:f[1],source:c[l]}))}return u},parseOpera10:function(i){for(var s=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,c=i.stacktrace.split("\n"),u=[],l=0,m=c.length;l<m;l+=2){var f=s.exec(c[l]);f&&u.push(new n({functionName:f[3]||void 0,fileName:f[2],lineNumber:f[1],source:c[l]}))}return u},parseOpera11:function(i){var s=i.stack.split("\n").filter(function(c){return!!c.match(r)&&!c.match(/^Error created at/)},this);return s.map(function(c){var u=c.split("@"),l=this.extractLocation(u.pop()),m=u.shift()||"",f=m.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,p;m.match(/\(([^)]*)\)/)&&(p=m.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var b=p===void 0||p==="[arguments not available]"?void 0:p.split(",");return new n({functionName:f,args:b,fileName:l[0],lineNumber:l[1],columnNumber:l[2],source:c})},this)}}})})(xr);var Jn=xr.exports;const Qn=zn(Jn);function Xn(t,e){return!!(e!=null&&e.includes(t))}function ea(t,e){try{return Qn.parse(e).map(n=>{var r,o,a;return{method:(r=n.functionName)!=null?r:"",file:(o=n.fileName)!=null?o:"",lineNumber:(a=n.lineNumber)!=null?a:0,columnNumber:n.columnNumber,inProject:Xn(t,n.fileName)}})}catch(n){return[]}}var Xt="5",ta=class{constructor(t){w(this,"breadcrumbs",[]),w(this,"apiKey"),w(this,"plugins"),w(this,"appId"),w(this,"appType"),w(this,"appVersion"),w(this,"releaseStage"),w(this,"locale"),w(this,"userAgent"),w(this,"metadata"),w(this,"onError"),w(this,"onPostErrorListeners",[]);var e;this.apiKey=t.apiKey,this.appType=t.appType,this.appId=t.appId,this.appVersion=t.appVersion,this.releaseStage=t.releaseStage,this.locale=t.locale,this.userAgent=t.userAgent,this.metadata=t.metadata,this.onError=t.onError,this.plugins=(e=t.plugins)!=null?e:[],this.plugins.forEach(n=>n.load(this)),this.leaveBreadcrumb("Bugsnag started",void 0,"state")}leaveBreadcrumb(t,e,n="manual"){this.breadcrumbs.push({name:t,metaData:e,type:n,timestamp:new Date().toISOString()})}notify(t,{errorClass:e,severity:n,severityType:r,handled:o=!0,metadata:a,context:i}={}){var s,c;let u=_(_({},this.metadata),a),l=this.buildBugsnagEvent({error:t,errorClass:e,severityType:r,handled:o,severity:n,metadata:u,context:i});if(((c=(s=this.onError)==null?void 0:s.call(this,l))==null||c)&&this.releaseStage!=="development"){let m=this.sendToBugsnag(l);return this.onPostErrorListeners.forEach(f=>f(l)),m}return Promise.resolve()}addOnPostError(t){this.onPostErrorListeners.push(t)}buildBugsnagEvent({error:t,errorClass:e,severity:n="error",severityType:r="handledException",handled:o,metadata:a={},context:i}){let s=new Date().toISOString(),{breadcrumbs:c,appId:u,appType:l,appVersion:m,releaseStage:f,locale:p,userAgent:b}=this;return{payloadVersion:Xt,exceptions:[{errorClass:e!=null?e:t.name,stacktrace:ea(u,t),message:t.message}],severity:n,severityReason:{type:r},unhandled:!o,app:{id:u,type:l,version:m,releaseStage:f},device:{time:s,locale:p,userAgent:b},breadcrumbs:c,context:i,metaData:a}}async sendToBugsnag(t){let{apiKey:e}=this,n={apiKey:e,notifier:{name:"Bugsnag JavaScript",version:"7.22.2",url:"https://github.com/bugsnag/bugsnag-js"},events:[t]};await fetch("https://notify.bugsnag.com/",{method:"POST",headers:{"Content-Type":"application/json","Bugsnag-Api-Key":e,"Bugsnag-Payload-Version":Xt,"Bugsnag-Sent-At":t.device.time},body:JSON.stringify(n)})}};function ra(t){let e=window.onerror;window.onerror=(n,r,o,a,i)=>{i&&t.notify(i,{severityType:"unhandledException",handled:!1}),typeof e=="function"&&e.apply(window.onerror,[n,r,o,a,i])}}function na(t){window.addEventListener("unhandledrejection",({reason:e})=>{e&&t.notify(e,{severityType:"unhandledPromiseRejection",handled:!1})})}function $t(t){try{const e=new RegExp("(".concat(t,")=([^;]+)")).exec(document.cookie);return e?e[2]:null}catch(e){return null}}const Ct={BRANDED_BUTTON:"shopify-payment-button__button shopify-payment-button__button--branded",UNBRANDED_BUTTON:"shopify-payment-button__button shopify-payment-button__button--unbranded",MORE_PAYMENT_OPTION_BUTTON:"shopify-payment-button__more-options",HIDDEN:"shopify-payment-button__button--hidden"},er={DARK:"apple-pay-button-black",LIGHT:"apple-pay-button-white"},aa=44,ia="_shopify_y",Ur=6,oa="discount_code",sa=["Load failed","Failed to fetch","when attempting to fetch resource"],ca=["Chrome-Lighthouse"],It={};function la(t){return!t.exceptions[0]||(da(t),ua())?!1:pa(t)}function ua(){const t=navigator.userAgent;return ca.some(e=>t.includes(e))}function da(t){var e,n;t.context=window.location.pathname,t.request||(t.request={}),t.request.url=window.location.href,t.device.orientation=(n=(e=window.screen)==null?void 0:e.orientation)==null?void 0:n.type,t.metaData=_(_({},It),t.metaData)}function pa(t){const e=t.exceptions[0];return sa.some(n=>{var r,o;return(o=(r=e.message)==null?void 0:r.includes(n))!=null?o:!1})||e.stacktrace.some(n=>{var r;return(r=n.file)==null?void 0:r.includes("spin.dev")})||e.errorClass==="OpenTelemetryClientError"&&(e.message==="Server responded with 404"||e.message==="Server responded with undefined")?!1:e.stacktrace.some(n=>!!(n!=null&&n.inProject))}var kr;const ha={apiKey:"cb577dc231be1c7494db8a63441ef66b",appId:"portable-wallets",appVersion:"0.0.0-7bb9776bcc0e4b561af66964ec4127b0b2e7d601",releaseStage:"canary",locale:"en",userAgent:navigator.userAgent,metadata:{user:{id:(kr=$t(ia))!=null?kr:"unknown"}},onError:la},S=new ta(ha);function Bt(t){for(const[e,n]of Object.entries(t))It[e]=_(_({},It[e]),n)}var $r={en:{instruments_copy:{checkout:{buy_now:"Buy it now"}},error_dialogs:{checkout:{title:"Checkout unavailable",generic_error:"Checkout is currently unavailable due to technical problems. Please try again in a few minutes.",button_text:"Close"},wallet:{title:"%{wallet} unavailable",generic_error:"There was an issue with %{wallet}. Try again or use a different payment method."}},more_payment_options:"More payment options",order_summary:{total:"Total",subtotal:"Subtotal",duties:"Duties",taxes:"Taxes",shipping:"Shipping",discount:"Discount"},brand:{apple_pay:"Apple Pay"},errors:{missing:{email:"Enter an email address",first_name:"Enter a first name",last_name:"Enter a last name",address1:"Enter an address",address2:"Enter an apartment, suite, etc.",city:"Enter a city",zone:"Select a state / province",phone:"Enter a phone number",postal_code:"Enter a ZIP / postal code"},invalid:{email:"Enter a valid email",first_name:"Enter a valid first name",last_name:"Enter a valid last name",address1:"Enter a valid address",address2:"Enter a valid apartment, suite, etc.",city:"Enter a valid city",zone:"Select a valid state / province",country:"Select a country / region",phone:"Enter a valid phone number",postal_code:"Enter a valid zip / postal code"}}}};$r.en;function rt(){return new Tt($r)}class tr extends Error{constructor(e,n){const r="i18n: Missing or invalid translation '".concat(e,"' in '").concat(n,"'");super(r)}}class fa extends Error{constructor(e,n,r){const o="i18n: Missing translation template key '".concat(e,"' for '").concat(n,"' in '").concat(r,"'");super(o)}}class ma extends Error{constructor(e,n,r){const o="i18n: Invalid pluralization for '".concat(e,"':'").concat(n,"' in '").concat(r,"'");super(o)}}var ke,B,Ze,Cr,Je,Br,Qe,Fr;const Wt=class ns{constructor(e){re(this,Ze),re(this,Je),re(this,Qe),re(this,ke,void 0),re(this,B,ns.getDefaultLanguage()),Jt(this,ke,e)}static getDefaultLanguage(){return"en"}get locale(){return j(this,B)}translate(e,n={}){var r;const o=e.split(".");let a=j(this,ke)[j(this,B)];try{for(const i of o)switch(typeof a){case"object":a=a[i];break;case"string":case"undefined":throw new tr(e,j(this,B))}if(qe(this,Ze,Cr).call(this,a,n)){if(typeof a=="string")throw new ma(e,a,j(this,B));a=a[qe(this,Je,Br).call(this,a,n.count)]}if(typeof a!="string")throw new tr(e,j(this,B));return qe(this,Qe,Fr).call(this,a,n)}catch(i){return S.notify(i),(r=n.defaultValue)!=null?r:e}}};ke=new WeakMap,B=new WeakMap,Ze=new WeakSet,Cr=function(t,e){return typeof t!="string"&&e.count!=="undefined"},Je=new WeakSet,Br=function(t,e){let n=e===1?"one":"other";return e===0&&typeof t!="string"&&t.zero!=="undefined"&&(n="zero"),n},Qe=new WeakSet,Fr=function(t,e={}){const n=t.match(/%\{.+?\}/g);return n?n.reduce((r,o)=>{const a=o.replace(/%\{(.*)\}/,"$1");return e[a]?r.replace(o,e[a]):(S.notify(new fa(a,t,j(this,B))),r)},t):t};let Tt=Wt;var ee=(t=>(t.CartPage="cart_page",t.CartAjax="cart_ajax",t.ProductPage="product",t.Unknown="unknown",t))(ee||{}),Y=(t=>(t.Af="AF",t.Ax="AX",t.Al="AL",t.Dz="DZ",t.Ad="AD",t.Ao="AO",t.Ai="AI",t.Ag="AG",t.Ar="AR",t.Am="AM",t.Aw="AW",t.Ac="AC",t.Au="AU",t.At="AT",t.Az="AZ",t.Bs="BS",t.Bh="BH",t.Bd="BD",t.Bb="BB",t.By="BY",t.Be="BE",t.Bz="BZ",t.Bj="BJ",t.Bm="BM",t.Bt="BT",t.Bo="BO",t.Ba="BA",t.Bw="BW",t.Bv="BV",t.Br="BR",t.Io="IO",t.Bn="BN",t.Bg="BG",t.Bf="BF",t.Bi="BI",t.Kh="KH",t.Ca="CA",t.Cv="CV",t.Bq="BQ",t.Ky="KY",t.Cf="CF",t.Td="TD",t.Cl="CL",t.Cn="CN",t.Cx="CX",t.Cc="CC",t.Co="CO",t.Km="KM",t.Cg="CG",t.Cd="CD",t.Ck="CK",t.Cr="CR",t.Hr="HR",t.Cu="CU",t.Cw="CW",t.Cy="CY",t.Cz="CZ",t.Ci="CI",t.Dk="DK",t.Dj="DJ",t.Dm="DM",t.Do="DO",t.Ec="EC",t.Eg="EG",t.Sv="SV",t.Gq="GQ",t.Er="ER",t.Ee="EE",t.Sz="SZ",t.Et="ET",t.Fk="FK",t.Fo="FO",t.Fj="FJ",t.Fi="FI",t.Fr="FR",t.Gf="GF",t.Pf="PF",t.Tf="TF",t.Ga="GA",t.Gm="GM",t.Ge="GE",t.De="DE",t.Gh="GH",t.Gi="GI",t.Gr="GR",t.Gl="GL",t.Gd="GD",t.Gp="GP",t.Gt="GT",t.Gg="GG",t.Gn="GN",t.Gw="GW",t.Gy="GY",t.Ht="HT",t.Hm="HM",t.Va="VA",t.Hn="HN",t.Hk="HK",t.Hu="HU",t.Is="IS",t.In="IN",t.Id="ID",t.Ir="IR",t.Iq="IQ",t.Ie="IE",t.Im="IM",t.Il="IL",t.It="IT",t.Jm="JM",t.Jp="JP",t.Je="JE",t.Jo="JO",t.Kz="KZ",t.Ke="KE",t.Ki="KI",t.Kp="KP",t.Xk="XK",t.Kw="KW",t.Kg="KG",t.La="LA",t.Lv="LV",t.Lb="LB",t.Ls="LS",t.Lr="LR",t.Ly="LY",t.Li="LI",t.Lt="LT",t.Lu="LU",t.Mo="MO",t.Mg="MG",t.Mw="MW",t.My="MY",t.Mv="MV",t.Ml="ML",t.Mt="MT",t.Mq="MQ",t.Mr="MR",t.Mu="MU",t.Yt="YT",t.Mx="MX",t.Md="MD",t.Mc="MC",t.Mn="MN",t.Me="ME",t.Ms="MS",t.Ma="MA",t.Mz="MZ",t.Mm="MM",t.Na="NA",t.Nr="NR",t.Np="NP",t.Nl="NL",t.An="AN",t.Nc="NC",t.Nz="NZ",t.Ni="NI",t.Ne="NE",t.Ng="NG",t.Nu="NU",t.Nf="NF",t.Mk="MK",t.No="NO",t.Om="OM",t.Pk="PK",t.Ps="PS",t.Pa="PA",t.Pg="PG",t.Py="PY",t.Pe="PE",t.Ph="PH",t.Pn="PN",t.Pl="PL",t.Pt="PT",t.Qa="QA",t.Cm="CM",t.Re="RE",t.Ro="RO",t.Ru="RU",t.Rw="RW",t.Bl="BL",t.Sh="SH",t.Kn="KN",t.Lc="LC",t.Mf="MF",t.Pm="PM",t.Ws="WS",t.Sm="SM",t.St="ST",t.Sa="SA",t.Sn="SN",t.Rs="RS",t.Sc="SC",t.Sl="SL",t.Sg="SG",t.Sx="SX",t.Sk="SK",t.Si="SI",t.Sb="SB",t.So="SO",t.Za="ZA",t.Gs="GS",t.Kr="KR",t.Ss="SS",t.Es="ES",t.Lk="LK",t.Vc="VC",t.Sd="SD",t.Sr="SR",t.Sj="SJ",t.Se="SE",t.Ch="CH",t.Sy="SY",t.Tw="TW",t.Tj="TJ",t.Tz="TZ",t.Th="TH",t.Tl="TL",t.Tg="TG",t.Tk="TK",t.To="TO",t.Tt="TT",t.Ta="TA",t.Tn="TN",t.Tr="TR",t.Tm="TM",t.Tc="TC",t.Tv="TV",t.Ug="UG",t.Ua="UA",t.Ae="AE",t.Gb="GB",t.Us="US",t.Um="UM",t.Uy="UY",t.Uz="UZ",t.Vu="VU",t.Ve="VE",t.Vn="VN",t.Vg="VG",t.Wf="WF",t.Eh="EH",t.Ye="YE",t.Zm="ZM",t.Zw="ZW",t.Zz="ZZ",t))(Y||{});const De=[];function te(t,e,n){window.customElements!=null&&(window.customElements.get(t)||(window.customElements.define(t,e),n!=null&&n.isChildCustomElement&&De.push(t)))}function qr(){var t,e;const n=new URLSearchParams(window.location.search);return((e=(t=n.get("shopify-debug"))!=null?t:n.get("shopifydebug"))!=null?e:"")!==""}function ya(){return new URLSearchParams(window.location.search).get("show")||null}function ga(){var t;const e=(t=window.Shopify)==null?void 0:t.CartType;let n=ee.ProductPage;return window.Shopify?e===ee.CartAjax?n=ee.CartAjax:e===ee.CartPage&&(n=ee.CartPage):n=ee.Unknown,n}function Ot(t){return Number(t).toFixed(2)}function ba(t){if(!(!t||!t.id||!t.id.includes("gid://shopify/Cart/")))return t.id.replace("gid://shopify/Cart/","")}class va extends HTMLElement{constructor(){super(),w(this,"overflow"),this.attachShadow({mode:"open"}),this.overflow=""}connectedCallback(){const e=rt();this.render(e);const n=this.shadowRoot,r=n.getElementById("modal");n.querySelectorAll("button").forEach(a=>a.addEventListener("click",this.closeModal.bind(this))),n.getElementById("overlay").addEventListener("click",a=>this.handleOutsideClick(a,r)),document.addEventListener("keydown",this.handleEscapeKey.bind(this));const o=document.createElement("style");o.textContent=Kn,n.appendChild(o),this.overflow=document.body.style.overflow,document.body.style.overflow="hidden",this.trapFocus(r,n),te("svg-icon",Wn)}trapFocus(e,n){const r=e.querySelectorAll("a[href], button"),o=Array.from(r),a=o[0],i=o[o.length-1];e.addEventListener("keydown",s=>{s.key==="Tab"&&!s.shiftKey&&n.activeElement===i&&(s.preventDefault(),a.focus()),s.key==="Tab"&&s.shiftKey&&n.activeElement===a&&(s.preventDefault(),i.focus())}),a.focus()}handleOutsideClick(e,n){n.contains(e.target)||this.closeModal()}handleEscapeKey(e){e.key==="Escape"&&this.closeModal()}closeModal(){document.body.style.overflow=this.overflow,this.remove()}render(e){const n=this.getAttribute("title"),r=this.getAttribute("has-close-button"),o=e.translate("error_dialogs.checkout.button_text"),a='\n      <footer>\n        <button type="button" id="close-button">'.concat(o,"</button>\n      </footer>\n    ");this.shadowRoot.innerHTML='\n      <div id="overlay">\n        <div id="modal">\n          <header>\n            <span id="title">\n              '.concat(n,'\n            </span>\n            <button type="button" id="close-icon" aria-label=').concat(o,'>\n              <svg-icon name="close" color="gray"></svg-icon>\n            </button>\n          </header>\n          <div id="content">\n            <p><slot></slot></p>\n          </div>\n          ').concat(r?a:"","\n        </div>\n      </div>\n    ")}}function Ft(t,e){const n=document.createElement("top-level-modal");n.setAttribute("data-testid","top-level-modal"),n.setAttribute("title",'<svg-icon name="warning" color="red"></svg-icon> '.concat(t)),n.setAttribute("has-close-button","true"),n.textContent=e,document.body.appendChild(n)}te("top-level-modal",va);class jr extends HTMLElement{get buyerCountry(){return this.getAttribute("buyer-country")}get buyerCurrency(){const e=this.getAttribute("buyer-currency");if(e==null)throw new Error("WalletElement buyer-currency is null");return e}get accessToken(){return this.getAttribute("access-token")}get disabled(){const e=this.getAttribute("disabled");return e==="true"||e===""}set disabled(e){e?this.setAttribute("disabled","true"):this.removeAttribute("disabled")}get hasSellingPlan(){const e=this.getAttribute("has-selling-plan");return e==="true"||e===""}set hasSellingPlan(e){e?this.setAttribute("has-selling-plan","true"):this.removeAttribute("has-selling-plan")}}const wa=70;class oe{constructor(e,n,r,o){w(this,"red"),w(this,"green"),w(this,"blue"),w(this,"opacity"),this.red=e||0,this.green=n||0,this.blue=r||0,this.opacity=typeof o>"u"?1:o}getLuminance(){const e=this.red&255,n=this.green&255,r=this.blue&255;return e*.2126+n*.7152+r*.0722}isDark(){return this.opacity===0?!1:this.getLuminance()/this.opacity<wa}blendWith(e,n){this.opacity=1-(1-e.opacity)*(1-n.opacity),this.red=this.blend(e.red,n.red,e,n),this.green=this.blend(e.green,n.green,e,n),this.blue=this.blend(e.blue,n.blue,e,n)}blend(e,n,r,o){return Math.round(e*r.opacity/this.opacity+n*o.opacity*(1-r.opacity)/this.opacity)}}function _a(t){const e=[...t];let n=new oe(0,0,0,0),r=new oe(255,255,255,1),o=e.shift();for(;o;)n.opacity>0&&o.opacity>0?(r=new oe(0,0,0,0),r.blendWith(o,n)):o.opacity>0?r=o:r=n,n=r,o=e.shift();return r}function Ea(t){const e=[];let n=t;for(;n.parentElement;){n=n.parentElement;const r=window.getComputedStyle(n).backgroundColor,o=Sa(r);if(r&&e.push(o),o.opacity===1)break}try{return _a(e.reverse())}catch(r){return S.notify(new Error("[BackgroundDetection] Failed to blend colors for element ".concat(t.outerHTML))),new oe(255,255,255,1)}}function Sa(t){try{const e=t.split("(")[1].split(")")[0].replace(" ","").split(",");return new oe(Number(e[0]),Number(e[1]),Number(e[2]),typeof e[3]>"u"?1:Number(e[3]))}catch(e){S.notify(new Error("[BackgroundDetection] Failed to convert rgbString to array ".concat(t)))}return new oe(255,255,255,1)}var Aa=0;function le(t){return"__private_"+Aa+++"_"+t}function O(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}function qt(t){return Object.entries(t).map(([e,n])=>({key:e,value:{stringValue:String(n)}}))}const Vr=1,Pa=Ia(5,2,12);function Ia(t,e,n){const r=[0];for(let o=0;o<n;o++){const a=Math.floor(t*e**o);r.push(a)}return r}var he=le("exporter"),C=le("attributes"),x=le("metrics");class Ta{constructor({exporter:e,attributes:n}){Object.defineProperty(this,he,{writable:!0,value:void 0}),Object.defineProperty(this,C,{writable:!0,value:void 0}),Object.defineProperty(this,x,{writable:!0,value:[]}),O(this,he)[he]=e,O(this,C)[C]=n!=null?n:{}}addAttributes(e){O(this,C)[C]=_(_({},O(this,C)[C]),e)}histogram({name:e,value:n,unit:r,bounds:o,attributes:a}){const i=Date.now()*1e6;O(this,x)[x].push({name:e,type:"histogram",value:n,unit:r,timeUnixNano:i,attributes:a,bounds:o})}counter({name:e,value:n,unit:r,attributes:o}){const a=Date.now()*1e6;O(this,x)[x].push({name:e,type:"counter",value:n,unit:r,timeUnixNano:a,attributes:o})}gauge({name:e,value:n,unit:r,attributes:o}){const a=Date.now()*1e6;O(this,x)[x].push({name:e,type:"gauge",value:n,unit:r,timeUnixNano:a,attributes:o})}async exportMetrics(){const e={};O(this,x)[x].forEach(r=>{switch(r.attributes=_(_({},O(this,C)[C]),r.attributes),r.type){case"histogram":Oa(e,r);break;case"counter":Ma(e,r);break;case"gauge":Na(e,r);break}});const n=Object.values(e);n.length!==0&&(O(this,x)[x]=[],await O(this,he)[he].exportMetrics(n))}}function Oa(t,e){var n;const{name:r,value:o,unit:a,timeUnixNano:i,attributes:s}=e,c=(n=e.bounds)!==null&&n!==void 0?n:Pa,u=new Array(c.length+1).fill(0);t[r]||(t[r]={name:r,unit:a||"1",histogram:{aggregationTemporality:Vr,dataPoints:[]}});for(let l=0;l<u.length;l++){const m=c[l];if(m===void 0)u[l]=1;else if(o<=m){u[l]=1;break}}t[r].histogram.dataPoints.push({startTimeUnixNano:i,timeUnixNano:i,count:1,sum:o,min:o,max:o,bucketCounts:u,explicitBounds:c,attributes:qt(s!=null?s:{})})}function Ma(t,e){const{name:n,value:r,unit:o,timeUnixNano:a,attributes:i}=e;t[n]||(t[n]={name:n,unit:o||"1",sum:{aggregationTemporality:Vr,isMonotonic:!0,dataPoints:[]}}),t[n].sum.dataPoints.push({startTimeUnixNano:a,timeUnixNano:a,asDouble:r,attributes:qt(i!=null?i:{})})}function Na(t,e){const{name:n,value:r,unit:o,timeUnixNano:a,attributes:i}=e;t[n]||(t[n]={name:n,unit:o||"1",gauge:{dataPoints:[]}}),t[n].gauge.dataPoints.push({startTimeUnixNano:a,timeUnixNano:a,asDouble:r,attributes:qt(i!=null?i:{})})}var fe=le("url"),me=le("serviceName"),ye=le("logger");class Da{constructor(e,n,r){Object.defineProperty(this,fe,{writable:!0,value:void 0}),Object.defineProperty(this,me,{writable:!0,value:void 0}),Object.defineProperty(this,ye,{writable:!0,value:void 0}),O(this,fe)[fe]=e,O(this,me)[me]=n,O(this,ye)[ye]=r==null?void 0:r.logger}async exportMetrics(e){var n;const r={resourceMetrics:[{resource:{attributes:[{key:"service.name",value:{stringValue:O(this,me)[me]}}]},scopeMetrics:[{scope:{name:"open-telemetry-mini-client",version:"0.3.3",attributes:[]},metrics:e}]}]},o=await fetch(O(this,fe)[fe],{method:"POST",keepalive:!0,headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if((n=O(this,ye)[ye])===null||n===void 0||n.log({status:o.status}),!o.ok){if(o.status===400){const a=await o.text();throw new He("Invalid OpenTelemetry Metrics: ".concat(a))}if(o.status===429||o.status===503){const a=await o.json(),i=o.headers.get("Retry-After"),s=i?{seconds:Number(i)}:void 0;throw new He("Server did not accept metrics",{errorData:a,retryAfter:s,metrics:e})}throw new He("Server responded with ".concat(o.status))}}}class He extends Error{constructor(e,n){super(e),this.metadata=void 0,this.name="OpenTelemetryClientError",this.metadata=n}}const Ra="https://otlp-http-production.shopifysvc.com/v1/metrics",ka="portable_wallets";class La{constructor(e){this.exporter=e}async exportMetrics(e){var n;try{await this.exporter.exportMetrics(e)}catch(r){if(r instanceof He){const o=(n=r.metadata)==null?void 0:n.retryAfter;if(o){await new Promise(a=>{setTimeout(()=>{this.exportMetrics(e),a()},o.seconds*1e3)});return}}throw r}}}const xa=new Da(Ra,ka),Ua=new La(xa),Z=new Ta({exporter:Ua});class Le extends jr{constructor(){super(),w(this,"i18n"),w(this,"dataSource"),w(this,"apiClient"),w(this,"onRendered"),w(this,"setI18n"),w(this,"setDataSource"),w(this,"setApiClient"),w(this,"parsedWalletParams"),this.onRendered=()=>{},[this.i18n,this.setI18n]=this.createResolvablePromise(),[this.dataSource,this.setDataSource]=this.createResolvablePromise(),[this.apiClient,this.setApiClient]=this.createResolvablePromise()}attributeChangedCallback(e,n,r,o){n!==r&&e==="disabled"&&o&&(r?o.setAttribute("aria-disabled","true"):o.removeAttribute("aria-disabled"))}createResolvablePromise(){let e;return[new Promise(n=>e=n),e]}backgroundIsDark(){return Ea(this).isDark()}get walletParams(){var e;if(this.parsedWalletParams===void 0)try{this.parsedWalletParams=JSON.parse((e=this.getAttribute("wallet-params"))!=null?e:"{}")}catch(n){throw new Error("Error while parsing wallet-params JSON: ".concat(n))}return this.parsedWalletParams}redirectToCheckout(e){Z.exportMetrics(),window.location.assign(e)}}var Re={},nt={},Mt=function(t,e){return Mt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},Mt(t,e)};function Gr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Mt(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ze=function(){return ze=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},ze.apply(this,arguments)};function Hr(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function Wr(t,e,n,r){var o=arguments.length,a=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function Kr(t,e){return function(n,r){e(n,r,t)}}function $a(t,e,n,r,o,a){function i(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var s=r.kind,c=s==="getter"?"get":s==="setter"?"set":"value",u=!e&&t?r.static?t:t.prototype:null,l=e||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),m,f=!1,p=n.length-1;p>=0;p--){var b={};for(var d in r)b[d]=d==="access"?{}:r[d];for(var d in r.access)b.access[d]=r.access[d];b.addInitializer=function(y){if(f)throw new TypeError("Cannot add initializers after decoration has completed");a.push(i(y||null))};var h=(0,n[p])(s==="accessor"?{get:l.get,set:l.set}:l[c],b);if(s==="accessor"){if(h===void 0)continue;if(h===null||typeof h!="object")throw new TypeError("Object expected");(m=i(h.get))&&(l.get=m),(m=i(h.set))&&(l.set=m),(m=i(h.init))&&o.unshift(m)}else(m=i(h))&&(s==="field"?o.unshift(m):l[c]=m)}u&&Object.defineProperty(u,r.name,l),f=!0}function Ca(t,e,n){for(var r=arguments.length>2,o=0;o<e.length;o++)n=r?e[o].call(t,n):e[o].call(t);return r?n:void 0}function Ba(t){return typeof t=="symbol"?t:"".concat(t)}function Fa(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function zr(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Yr(t,e,n,r){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function s(l){try{u(r.next(l))}catch(m){i(m)}}function c(l){try{u(r.throw(l))}catch(m){i(m)}}function u(l){l.done?a(l.value):o(l.value).then(s,c)}u((r=r.apply(t,e||[])).next())})}function Zr(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,o,a,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(u){return function(l){return c([u,l])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(n=0)),n;)try{if(r=1,o&&(a=u[0]&2?o.return:u[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,u[1])).done)return a;switch(o=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,o=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){n.label=u[1];break}if(u[0]===6&&n.label<a[1]){n.label=a[1],a=u;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(u);break}a[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(l){u=[6,l],o=0}finally{r=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var at=Object.create?function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]};function Jr(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&at(e,t,n)}function Ye(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function jt(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,a=[],i;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(s){i={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a}function Qr(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(jt(arguments[e]));return t}function Xr(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),o=0,e=0;e<n;e++)for(var a=arguments[e],i=0,s=a.length;i<s;i++,o++)r[o]=a[i];return r}function en(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,a;r<o;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function ce(t){return this instanceof ce?(this.v=t,this):new ce(t)}function tn(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),o,a=[];return o={},i("next"),i("throw"),i("return"),o[Symbol.asyncIterator]=function(){return this},o;function i(f){r[f]&&(o[f]=function(p){return new Promise(function(b,d){a.push([f,p,b,d])>1||s(f,p)})})}function s(f,p){try{c(r[f](p))}catch(b){m(a[0][3],b)}}function c(f){f.value instanceof ce?Promise.resolve(f.value.v).then(u,l):m(a[0][2],f)}function u(f){s("next",f)}function l(f){s("throw",f)}function m(f,p){f(p),a.shift(),a.length&&s(a[0][0],a[0][1])}}function rn(t){var e,n;return e={},r("next"),r("throw",function(o){throw o}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(o,a){e[o]=t[o]?function(i){return(n=!n)?{value:ce(t[o](i)),done:!1}:a?a(i):i}:a}}function nn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Ye=="function"?Ye(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=t[a]&&function(i){return new Promise(function(s,c){i=t[a](i),o(s,c,i.done,i.value)})}}function o(a,i,s,c){Promise.resolve(c).then(function(u){a({value:u,done:s})},i)}}function an(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var qa=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function on(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&at(e,t,n);return qa(e,t),e}function sn(t){return t&&t.__esModule?t:{default:t}}function cn(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function ln(t,e,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n}function un(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function dn(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var ja=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function pn(t){function e(r){t.error=t.hasError?new ja(r,t.error,"An error was suppressed during disposal."):r,t.hasError=!0}function n(){for(;t.stack.length;){var r=t.stack.pop();try{var o=r.dispose&&r.dispose.call(r.value);if(r.async)return Promise.resolve(o).then(n,function(a){return e(a),n()})}catch(a){e(a)}}if(t.hasError)throw t.error}return n()}const Va={__extends:Gr,__assign:ze,__rest:Hr,__decorate:Wr,__param:Kr,__metadata:zr,__awaiter:Yr,__generator:Zr,__createBinding:at,__exportStar:Jr,__values:Ye,__read:jt,__spread:Qr,__spreadArrays:Xr,__spreadArray:en,__await:ce,__asyncGenerator:tn,__asyncDelegator:rn,__asyncValues:nn,__makeTemplateObject:an,__importStar:on,__importDefault:sn,__classPrivateFieldGet:cn,__classPrivateFieldSet:ln,__classPrivateFieldIn:un,__addDisposableResource:dn,__disposeResources:pn},Ga=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:dn,get __assign(){return ze},__asyncDelegator:rn,__asyncGenerator:tn,__asyncValues:nn,__await:ce,__awaiter:Yr,__classPrivateFieldGet:cn,__classPrivateFieldIn:un,__classPrivateFieldSet:ln,__createBinding:at,__decorate:Wr,__disposeResources:pn,__esDecorate:$a,__exportStar:Jr,__extends:Gr,__generator:Zr,__importDefault:sn,__importStar:on,__makeTemplateObject:an,__metadata:zr,__param:Kr,__propKey:Ba,__read:jt,__rest:Hr,__runInitializers:Ca,__setFunctionName:Fa,__spread:Qr,__spreadArray:en,__spreadArrays:Xr,__values:Ye,default:Va},Symbol.toStringTag,{value:"Module"})),xe=Yn(Ga);var M={};Object.defineProperty(M,"__esModule",{value:!0}),M.extractDomain=M.PRODUCTION_CANADA_ENDPOINT=M.PRODUCE_ENDPOINT=M.PRODUCE_BATCH_ENDPOINT=M.PRODUCTION_DOMAIN=M.DEVELOPMENT_DOMAIN=void 0,M.DEVELOPMENT_DOMAIN="http://localhost:8082",M.PRODUCTION_DOMAIN="https://monorail-edge.shopifysvc.com",M.PRODUCE_BATCH_ENDPOINT="/unstable/produce_batch",M.PRODUCE_ENDPOINT="/v1/produce",M.PRODUCTION_CANADA_ENDPOINT="https://monorail-edge-ca.shopifycloud.com/v1/produce";function Ha(t){return"https://".concat(new URL(t).hostname)}M.extractDomain=Ha;var it={},ot={};Object.defineProperty(ot,"__esModule",{value:!0}),ot.isCompositeMonorailEvent=void 0;function Wa(t){return t.schemaId!==void 0}ot.isCompositeMonorailEvent=Wa,Object.defineProperty(it,"__esModule",{value:!0}),it.ProducerMiddleware=void 0;var Ka=ot,za=function(){function t(e){this.producer=e}return t.prototype.do=function(e,n){return(0,Ka.isCompositeMonorailEvent)(e)?this.producer.produce(e):this.producer.produceBatch(e)},t}();it.ProducerMiddleware=za;var Ue={},wt={},ge={},je={},rr;function hn(){if(rr)return je;rr=1,Object.defineProperty(je,"__esModule",{value:!0}),je.default=n;let t;const e=new Uint8Array(16);function n(){if(!t&&(t=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!t))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(e)}return je}var ae={},be={},ve={},nr;function Ya(){if(nr)return ve;nr=1,Object.defineProperty(ve,"__esModule",{value:!0}),ve.default=void 0;var t=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;return ve.default=t,ve}var ar;function st(){if(ar)return be;ar=1,Object.defineProperty(be,"__esModule",{value:!0}),be.default=void 0;var t=e(Ya());function e(o){return o&&o.__esModule?o:{default:o}}function n(o){return typeof o=="string"&&t.default.test(o)}var r=n;return be.default=r,be}var ir;function ct(){if(ir)return ae;ir=1,Object.defineProperty(ae,"__esModule",{value:!0}),ae.default=void 0,ae.unsafeStringify=r;var t=e(st());function e(i){return i&&i.__esModule?i:{default:i}}const n=[];for(let i=0;i<256;++i)n.push((i+256).toString(16).slice(1));function r(i,s=0){return(n[i[s+0]]+n[i[s+1]]+n[i[s+2]]+n[i[s+3]]+"-"+n[i[s+4]]+n[i[s+5]]+"-"+n[i[s+6]]+n[i[s+7]]+"-"+n[i[s+8]]+n[i[s+9]]+"-"+n[i[s+10]]+n[i[s+11]]+n[i[s+12]]+n[i[s+13]]+n[i[s+14]]+n[i[s+15]]).toLowerCase()}function o(i,s=0){const c=r(i,s);if(!(0,t.default)(c))throw TypeError("Stringified UUID is invalid");return c}var a=o;return ae.default=a,ae}var or;function Za(){if(or)return ge;or=1,Object.defineProperty(ge,"__esModule",{value:!0}),ge.default=void 0;var t=n(hn()),e=ct();function n(u){return u&&u.__esModule?u:{default:u}}let r,o,a=0,i=0;function s(u,l,m){let f=l&&m||0;const p=l||new Array(16);u=u||{};let b=u.node||r,d=u.clockseq!==void 0?u.clockseq:o;if(b==null||d==null){const T=u.random||(u.rng||t.default)();b==null&&(b=r=[T[0]|1,T[1],T[2],T[3],T[4],T[5]]),d==null&&(d=o=(T[6]<<8|T[7])&16383)}let h=u.msecs!==void 0?u.msecs:Date.now(),y=u.nsecs!==void 0?u.nsecs:i+1;const v=h-a+(y-i)/1e4;if(v<0&&u.clockseq===void 0&&(d=d+1&16383),(v<0||h>a)&&u.nsecs===void 0&&(y=0),y>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=h,i=y,o=d,h+=122192928e5;const g=((h&268435455)*1e4+y)%4294967296;p[f++]=g>>>24&255,p[f++]=g>>>16&255,p[f++]=g>>>8&255,p[f++]=g&255;const A=h/4294967296*1e4&268435455;p[f++]=A>>>8&255,p[f++]=A&255,p[f++]=A>>>24&15|16,p[f++]=A>>>16&255,p[f++]=d>>>8|128,p[f++]=d&255;for(let T=0;T<6;++T)p[f+T]=b[T];return l||(0,e.unsafeStringify)(p)}var c=s;return ge.default=c,ge}var we={},V={},_e={},sr;function fn(){if(sr)return _e;sr=1,Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var t=e(st());function e(o){return o&&o.__esModule?o:{default:o}}function n(o){if(!(0,t.default)(o))throw TypeError("Invalid UUID");let a;const i=new Uint8Array(16);return i[0]=(a=parseInt(o.slice(0,8),16))>>>24,i[1]=a>>>16&255,i[2]=a>>>8&255,i[3]=a&255,i[4]=(a=parseInt(o.slice(9,13),16))>>>8,i[5]=a&255,i[6]=(a=parseInt(o.slice(14,18),16))>>>8,i[7]=a&255,i[8]=(a=parseInt(o.slice(19,23),16))>>>8,i[9]=a&255,i[10]=(a=parseInt(o.slice(24,36),16))/1099511627776&255,i[11]=a/4294967296&255,i[12]=a>>>24&255,i[13]=a>>>16&255,i[14]=a>>>8&255,i[15]=a&255,i}var r=n;return _e.default=r,_e}var cr;function mn(){if(cr)return V;cr=1,Object.defineProperty(V,"__esModule",{value:!0}),V.URL=V.DNS=void 0,V.default=i;var t=ct(),e=n(fn());function n(s){return s&&s.__esModule?s:{default:s}}function r(s){s=unescape(encodeURIComponent(s));const c=[];for(let u=0;u<s.length;++u)c.push(s.charCodeAt(u));return c}const o="6ba7b810-9dad-11d1-80b4-00c04fd430c8";V.DNS=o;const a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";V.URL=a;function i(s,c,u){function l(m,f,p,b){var d;if(typeof m=="string"&&(m=r(m)),typeof f=="string"&&(f=(0,e.default)(f)),((d=f)===null||d===void 0?void 0:d.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let h=new Uint8Array(16+m.length);if(h.set(f),h.set(m,f.length),h=u(h),h[6]=h[6]&15|c,h[8]=h[8]&63|128,p){b=b||0;for(let y=0;y<16;++y)p[b+y]=h[y];return p}return(0,t.unsafeStringify)(h)}try{l.name=s}catch(m){}return l.DNS=o,l.URL=a,l}return V}var Ee={},lr;function Ja(){if(lr)return Ee;lr=1,Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.default=void 0;function t(p){if(typeof p=="string"){const b=unescape(encodeURIComponent(p));p=new Uint8Array(b.length);for(let d=0;d<b.length;++d)p[d]=b.charCodeAt(d)}return e(r(o(p),p.length*8))}function e(p){const b=[],d=p.length*32,h="0123456789abcdef";for(let y=0;y<d;y+=8){const v=p[y>>5]>>>y%32&255,g=parseInt(h.charAt(v>>>4&15)+h.charAt(v&15),16);b.push(g)}return b}function n(p){return(p+64>>>9<<4)+14+1}function r(p,b){p[b>>5]|=128<<b%32,p[n(b)-1]=b;let d=1732584193,h=-271733879,y=-1732584194,v=271733878;for(let g=0;g<p.length;g+=16){const A=d,T=h,N=y,L=v;d=c(d,h,y,v,p[g],7,-680876936),v=c(v,d,h,y,p[g+1],12,-389564586),y=c(y,v,d,h,p[g+2],17,606105819),h=c(h,y,v,d,p[g+3],22,-1044525330),d=c(d,h,y,v,p[g+4],7,-176418897),v=c(v,d,h,y,p[g+5],12,1200080426),y=c(y,v,d,h,p[g+6],17,-1473231341),h=c(h,y,v,d,p[g+7],22,-45705983),d=c(d,h,y,v,p[g+8],7,1770035416),v=c(v,d,h,y,p[g+9],12,-1958414417),y=c(y,v,d,h,p[g+10],17,-42063),h=c(h,y,v,d,p[g+11],22,-1990404162),d=c(d,h,y,v,p[g+12],7,1804603682),v=c(v,d,h,y,p[g+13],12,-40341101),y=c(y,v,d,h,p[g+14],17,-1502002290),h=c(h,y,v,d,p[g+15],22,1236535329),d=u(d,h,y,v,p[g+1],5,-165796510),v=u(v,d,h,y,p[g+6],9,-1069501632),y=u(y,v,d,h,p[g+11],14,643717713),h=u(h,y,v,d,p[g],20,-373897302),d=u(d,h,y,v,p[g+5],5,-701558691),v=u(v,d,h,y,p[g+10],9,38016083),y=u(y,v,d,h,p[g+15],14,-660478335),h=u(h,y,v,d,p[g+4],20,-405537848),d=u(d,h,y,v,p[g+9],5,568446438),v=u(v,d,h,y,p[g+14],9,-1019803690),y=u(y,v,d,h,p[g+3],14,-187363961),h=u(h,y,v,d,p[g+8],20,1163531501),d=u(d,h,y,v,p[g+13],5,-1444681467),v=u(v,d,h,y,p[g+2],9,-51403784),y=u(y,v,d,h,p[g+7],14,1735328473),h=u(h,y,v,d,p[g+12],20,-1926607734),d=l(d,h,y,v,p[g+5],4,-378558),v=l(v,d,h,y,p[g+8],11,-2022574463),y=l(y,v,d,h,p[g+11],16,1839030562),h=l(h,y,v,d,p[g+14],23,-35309556),d=l(d,h,y,v,p[g+1],4,-1530992060),v=l(v,d,h,y,p[g+4],11,1272893353),y=l(y,v,d,h,p[g+7],16,-155497632),h=l(h,y,v,d,p[g+10],23,-1094730640),d=l(d,h,y,v,p[g+13],4,681279174),v=l(v,d,h,y,p[g],11,-358537222),y=l(y,v,d,h,p[g+3],16,-722521979),h=l(h,y,v,d,p[g+6],23,76029189),d=l(d,h,y,v,p[g+9],4,-640364487),v=l(v,d,h,y,p[g+12],11,-421815835),y=l(y,v,d,h,p[g+15],16,530742520),h=l(h,y,v,d,p[g+2],23,-995338651),d=m(d,h,y,v,p[g],6,-198630844),v=m(v,d,h,y,p[g+7],10,1126891415),y=m(y,v,d,h,p[g+14],15,-1416354905),h=m(h,y,v,d,p[g+5],21,-57434055),d=m(d,h,y,v,p[g+12],6,1700485571),v=m(v,d,h,y,p[g+3],10,-1894986606),y=m(y,v,d,h,p[g+10],15,-1051523),h=m(h,y,v,d,p[g+1],21,-2054922799),d=m(d,h,y,v,p[g+8],6,1873313359),v=m(v,d,h,y,p[g+15],10,-30611744),y=m(y,v,d,h,p[g+6],15,-1560198380),h=m(h,y,v,d,p[g+13],21,1309151649),d=m(d,h,y,v,p[g+4],6,-145523070),v=m(v,d,h,y,p[g+11],10,-1120210379),y=m(y,v,d,h,p[g+2],15,718787259),h=m(h,y,v,d,p[g+9],21,-343485551),d=a(d,A),h=a(h,T),y=a(y,N),v=a(v,L)}return[d,h,y,v]}function o(p){if(p.length===0)return[];const b=p.length*8,d=new Uint32Array(n(b));for(let h=0;h<b;h+=8)d[h>>5]|=(p[h/8]&255)<<h%32;return d}function a(p,b){const d=(p&65535)+(b&65535);return(p>>16)+(b>>16)+(d>>16)<<16|d&65535}function i(p,b){return p<<b|p>>>32-b}function s(p,b,d,h,y,v){return a(i(a(a(b,p),a(h,v)),y),d)}function c(p,b,d,h,y,v,g){return s(b&d|~b&h,p,b,y,v,g)}function u(p,b,d,h,y,v,g){return s(b&h|d&~h,p,b,y,v,g)}function l(p,b,d,h,y,v,g){return s(b^d^h,p,b,y,v,g)}function m(p,b,d,h,y,v,g){return s(d^(b|~h),p,b,y,v,g)}var f=t;return Ee.default=f,Ee}var ur;function Qa(){if(ur)return we;ur=1,Object.defineProperty(we,"__esModule",{value:!0}),we.default=void 0;var t=n(mn()),e=n(Ja());function n(o){return o&&o.__esModule?o:{default:o}}var r=(0,t.default)("v3",48,e.default);return we.default=r,we}var Se={},Ae={},dr;function Xa(){if(dr)return Ae;dr=1,Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.default=void 0;var t={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};return Ae.default=t,Ae}var pr;function ei(){if(pr)return Se;pr=1,Object.defineProperty(Se,"__esModule",{value:!0}),Se.default=void 0;var t=r(Xa()),e=r(hn()),n=ct();function r(i){return i&&i.__esModule?i:{default:i}}function o(i,s,c){if(t.default.randomUUID&&!s&&!i)return t.default.randomUUID();i=i||{};const u=i.random||(i.rng||e.default)();if(u[6]=u[6]&15|64,u[8]=u[8]&63|128,s){c=c||0;for(let l=0;l<16;++l)s[c+l]=u[l];return s}return(0,n.unsafeStringify)(u)}var a=o;return Se.default=a,Se}var Pe={},Ie={},hr;function ti(){if(hr)return Ie;hr=1,Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.default=void 0;function t(o,a,i,s){switch(o){case 0:return a&i^~a&s;case 1:return a^i^s;case 2:return a&i^a&s^i&s;case 3:return a^i^s}}function e(o,a){return o<<a|o>>>32-a}function n(o){const a=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof o=="string"){const l=unescape(encodeURIComponent(o));o=[];for(let m=0;m<l.length;++m)o.push(l.charCodeAt(m))}else Array.isArray(o)||(o=Array.prototype.slice.call(o));o.push(128);const s=o.length/4+2,c=Math.ceil(s/16),u=new Array(c);for(let l=0;l<c;++l){const m=new Uint32Array(16);for(let f=0;f<16;++f)m[f]=o[l*64+f*4]<<24|o[l*64+f*4+1]<<16|o[l*64+f*4+2]<<8|o[l*64+f*4+3];u[l]=m}u[c-1][14]=(o.length-1)*8/Math.pow(2,32),u[c-1][14]=Math.floor(u[c-1][14]),u[c-1][15]=(o.length-1)*8&4294967295;for(let l=0;l<c;++l){const m=new Uint32Array(80);for(let y=0;y<16;++y)m[y]=u[l][y];for(let y=16;y<80;++y)m[y]=e(m[y-3]^m[y-8]^m[y-14]^m[y-16],1);let f=i[0],p=i[1],b=i[2],d=i[3],h=i[4];for(let y=0;y<80;++y){const v=Math.floor(y/20),g=e(f,5)+t(v,p,b,d)+h+a[v]+m[y]>>>0;h=d,d=b,b=e(p,30)>>>0,p=f,f=g}i[0]=i[0]+f>>>0,i[1]=i[1]+p>>>0,i[2]=i[2]+b>>>0,i[3]=i[3]+d>>>0,i[4]=i[4]+h>>>0}return[i[0]>>24&255,i[0]>>16&255,i[0]>>8&255,i[0]&255,i[1]>>24&255,i[1]>>16&255,i[1]>>8&255,i[1]&255,i[2]>>24&255,i[2]>>16&255,i[2]>>8&255,i[2]&255,i[3]>>24&255,i[3]>>16&255,i[3]>>8&255,i[3]&255,i[4]>>24&255,i[4]>>16&255,i[4]>>8&255,i[4]&255]}var r=n;return Ie.default=r,Ie}var fr;function ri(){if(fr)return Pe;fr=1,Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.default=void 0;var t=n(mn()),e=n(ti());function n(o){return o&&o.__esModule?o:{default:o}}var r=(0,t.default)("v5",80,e.default);return Pe.default=r,Pe}var Te={},mr;function ni(){if(mr)return Te;mr=1,Object.defineProperty(Te,"__esModule",{value:!0}),Te.default=void 0;var t="00000000-0000-0000-0000-000000000000";return Te.default=t,Te}var Oe={},yr;function ai(){if(yr)return Oe;yr=1,Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.default=void 0;var t=e(st());function e(o){return o&&o.__esModule?o:{default:o}}function n(o){if(!(0,t.default)(o))throw TypeError("Invalid UUID");return parseInt(o.slice(14,15),16)}var r=n;return Oe.default=r,Oe}var gr;function ii(){return gr||(gr=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return i.default}});var e=l(Za()),n=l(Qa()),r=l(ei()),o=l(ri()),a=l(ni()),i=l(ai()),s=l(st()),c=l(ct()),u=l(fn());function l(m){return m&&m.__esModule?m:{default:m}}}(wt)),wt}Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.v4=void 0;function oi(){return typeof crypto=="object"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():ii().v4()}Ue.v4=oi;var lt={},K={};Object.defineProperty(K,"__esModule",{value:!0}),K.toUnderscoreCase=K.convertAllEventsToUnderscoreCase=K.convertStringToUnderscoreCase=void 0;var br=xe;function Nt(t,e){return e===void 0&&(e=!0),t&&Object.keys(t).length&&e?Object.keys(t).map(function(n){var r;return r={},r[yn(n)]=t[n],r}).reduce(function(n,r){return br.__assign(br.__assign({},n),r)}):t}K.toUnderscoreCase=Nt;function yn(t){return t.split(/(?=[A-Z])/).join("_").toLowerCase()}K.convertStringToUnderscoreCase=yn;function si(t){return t.events.map(function(e){var n=!0,r=!0;return e&&e.options&&Object.prototype.hasOwnProperty.call(e.options,"convertEventCase")&&(n=!!e.options.convertEventCase),e&&e.options&&Object.prototype.hasOwnProperty.call(e.options,"convertMetaDataCase")&&(r=!!e.options.convertMetaDataCase),{schema_id:e.schemaId,payload:Nt(e.payload,n),metadata:Nt(e.metadata,r)}})}K.convertAllEventsToUnderscoreCase=si;var R={};Object.defineProperty(R,"__esModule",{value:!0}),R.MonorailRetriesExceededError=R.MonorailRequestError=R.MonorailBatchProduceError=R.MonorailUnableToProduceError=void 0;var ut=xe,ci=function(t){ut.__extends(e,t);function e(n){var r=t.call(this,"Error producing to the Monorail Edge. Response received: ".concat(JSON.stringify(n)))||this;return r.response=n,Object.setPrototypeOf(r,e.prototype),r}return e}(Error);R.MonorailUnableToProduceError=ci;var li=function(t){ut.__extends(e,t);function e(n){var r=t.call(this,"Error producing to the Monorail Edge. Response received: ".concat(JSON.stringify(n)))||this;return Object.setPrototypeOf(r,e.prototype),r.response=n,r}return e}(Error);R.MonorailBatchProduceError=li;var ui=function(t){ut.__extends(e,t);function e(n){var r=t.call(this,"Error completing request. A network failure may have prevented the request from completing. Error: ".concat(n))||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(Error);R.MonorailRequestError=ui;var di=function(t){ut.__extends(e,t);function e(n){var r=t.call(this,"".concat(n))||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(Error);R.MonorailRetriesExceededError=di,Object.defineProperty(lt,"__esModule",{value:!0}),lt.HttpProducer=void 0;var Ve=xe,Ge=M,_t=K,pi=Ue,G=R,hi=function(){function t(e,n){e===void 0&&(e=Ge.DEVELOPMENT_DOMAIN),n===void 0&&(n=!1),this.edgeDomain=e,this.keepalive=n}return t.withEndpoint=function(e){return new t(Ge.extractDomain(e))},t.getHeadersFromMetadata=function(e){var n={"Content-Type":"application/json; charset=utf-8","X-Monorail-Edge-Event-Created-At-Ms":(e&&e.eventCreatedAtMs||Date.now()).toString(),"X-Monorail-Edge-Event-Sent-At-Ms":Date.now().toString(),"X-Monorail-Edge-Client-Message-Id":(e&&e.clientMessageId||(0,pi.v4)()).toString()};return e&&e.userAgent&&(n["User-Agent"]=e.userAgent),e&&e.remoteIp&&(n["X-Forwarded-For"]=e.remoteIp),n},t.prototype.produceBatch=function(e){return Ve.__awaiter(this,void 0,void 0,function(){var n,r,o,a,i,s;return Ve.__generator(this,function(c){switch(c.label){case 0:n={events:(0,_t.convertAllEventsToUnderscoreCase)(e),metadata:(0,_t.toUnderscoreCase)(e.metadata)},c.label=1;case 1:return c.trys.push([1,3,,4]),[4,fetch(this.produceBatchEndpoint(),{method:"post",headers:t.getHeadersFromMetadata(e.metadata),body:JSON.stringify(n),keepalive:this.keepalive})];case 2:return r=c.sent(),[3,4];case 3:throw o=c.sent(),new G.MonorailRequestError(o);case 4:return r.status!==207?[3,6]:[4,r.json()];case 5:throw a=c.sent(),new G.MonorailBatchProduceError(a);case 6:return r.ok?[3,8]:(i=G.MonorailUnableToProduceError.bind,s={status:r.status},[4,r.text()]);case 7:throw new(i.apply(G.MonorailUnableToProduceError,[void 0,(s.message=c.sent(),s)]));case 8:return[2,{status:r.status}]}})})},t.prototype.produce=function(e){return Ve.__awaiter(this,void 0,void 0,function(){var n,r,o,a,i,s;return Ve.__generator(this,function(c){switch(c.label){case 0:n=!0,e&&e.options&&Object.prototype.hasOwnProperty.call(e.options,"convertEventCase")&&(n=!!e.options.convertEventCase),r={schema_id:e.schemaId,payload:(0,_t.toUnderscoreCase)(e.payload,n)},c.label=1;case 1:return c.trys.push([1,3,,4]),[4,fetch(this.produceEndpoint(),{method:"post",headers:t.getHeadersFromMetadata(e.metadata),body:JSON.stringify(r),keepalive:this.keepalive})];case 2:return o=c.sent(),[3,4];case 3:throw a=c.sent(),new G.MonorailRequestError(a);case 4:if(!o)throw new G.MonorailUnableToProduceError({message:"No response from edge"});return o.ok?[3,6]:(i=G.MonorailUnableToProduceError.bind,s={status:o.status},[4,o.text()]);case 5:throw new(i.apply(G.MonorailUnableToProduceError,[void 0,(s.message=c.sent(),s)]));case 6:return[2,{status:o.status}]}})})},t.prototype.produceBatchEndpoint=function(){return this.edgeDomain+Ge.PRODUCE_BATCH_ENDPOINT},t.prototype.produceEndpoint=function(){return this.edgeDomain+Ge.PRODUCE_ENDPOINT},t}();lt.HttpProducer=hi;var dt={};Object.defineProperty(dt,"__esModule",{value:!0}),dt.LogProducer=void 0;var fi=function(){function t(e){this.sendToConsole=e,e&&t.printWelcomeMessage(e)}return t.printWelcomeMessage=function(e){console.log("%c\u{1F44B} from Monorail%c\n\n"+"We've noticed that you're".concat(e?"":" not"," ")+"running in debug mode. "+"As such, we will ".concat(e?"produce":"not produce"," ")+"Monorail events to the console. "+"\n\nIf you want Monorail events to ".concat(e?"stop":"start"," ")+"appearing here, %cset debugMode=".concat((!e).toString(),"%c, ")+"for the Monorail Log Producer in your code.","font-size: large;","font-size: normal;","font-weight: bold;","font-weight: normal;")},t.prototype.produce=function(e){return this.sendToConsole&&console.log("Monorail event produced",e),new Promise(function(n){n(e)})},t.prototype.produceBatch=function(e){return this.sendToConsole&&console.log("Monorail Batch event produced",e),new Promise(function(n){n(e)})},t}();dt.LogProducer=fi,Object.defineProperty(nt,"__esModule",{value:!0}),nt.Monorail=void 0;var mi=xe,vr=M,yi=it,gi=Ue,Et=lt,bi=dt,vi=function(){function t(e,n){this.producer=e,this.middleware=n,this.executeChain=t.buildMiddlewareChain(this.middleware.concat(new yi.ProducerMiddleware(e)))}return t.createLogProducer=function(e){return new t(new bi.LogProducer(e.debugMode),e.middleware||[])},t.createHttpProducerWithEndpoint=function(e,n){return n===void 0&&(n=[]),new t(Et.HttpProducer.withEndpoint(e),n)},t.createHttpProducer=function(e){var n=e.options&&e.options.keepalive;return new t(e.production?new Et.HttpProducer(vr.PRODUCTION_DOMAIN,n):new Et.HttpProducer(vr.DEVELOPMENT_DOMAIN,n),e.middleware||[])},t.buildMiddlewareChain=function(e,n){var r=this;return n===void 0&&(n=0),n===e.length?this.identityFn:function(o){return e[n].do(o,r.buildMiddlewareChain(e,n+1))}},t.prototype.produce=function(e){return e.metadata=mi.__assign({eventCreatedAtMs:Date.now(),clientMessageId:(0,gi.v4)()},e.metadata),this.executeChain(e)},t.prototype.produceBatch=function(e){return this.executeChain(e)},t}();nt.Monorail=vi;var pt={};Object.defineProperty(pt,"__esModule",{value:!0}),pt.RetryMiddleware=void 0;var wr=xe,_r=R,wi=function(){function t(e,n){e===void 0&&(e=3),n===void 0&&(n=150),this.maxRetries=e,this.delayMs=n}return t.prototype.do=function(e,n){return wr.__awaiter(this,void 0,void 0,function(){var r,o,a,i,s;return wr.__generator(this,function(c){switch(c.label){case 0:r=0,c.label=1;case 1:if(!(r<this.maxRetries))return[3,7];a=void 0,c.label=2;case 2:return c.trys.push([2,4,,6]),[4,n(e)];case 3:return a=c.sent(),[3,6];case 4:if(i=c.sent(),o=o||new Error,o=new Error("".concat(o.message," Retry count:").concat(r+1," Error msg:").concat(i.message,"\n")),i instanceof _r.MonorailUnableToProduceError&&(s=i.response.status,s&&s>=400&&s<500))throw i;return[4,this.delay(this.delayMs*Math.pow(2,r))];case 5:return c.sent(),r++,[3,1];case 6:return[2,a];case 7:throw o?o.message="Retry count of ".concat(this.maxRetries," exceeded. Failed with error: \n").concat(o.message," Aborting request for ").concat(JSON.stringify(e)):o=new Error,new _r.MonorailRetriesExceededError(o)}})})},t.prototype.delay=function(e){return new Promise(function(n){return setTimeout(n,e)})},t}();pt.RetryMiddleware=wi,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RetryMiddleware=t.MonorailRetriesExceededError=t.MonorailUnableToProduceError=t.MonorailRequestError=t.Monorail=void 0;var e=nt;Object.defineProperty(t,"Monorail",{enumerable:!0,get:function(){return e.Monorail}});var n=R;Object.defineProperty(t,"MonorailRequestError",{enumerable:!0,get:function(){return n.MonorailRequestError}}),Object.defineProperty(t,"MonorailUnableToProduceError",{enumerable:!0,get:function(){return n.MonorailUnableToProduceError}}),Object.defineProperty(t,"MonorailRetriesExceededError",{enumerable:!0,get:function(){return n.MonorailRetriesExceededError}});var r=pt;Object.defineProperty(t,"RetryMiddleware",{enumerable:!0,get:function(){return r.RetryMiddleware}})}(Re);const _i=["Chrome-Lighthouse"];function Ei(){const t=navigator.userAgent;return _i.some(e=>t.includes(e))}class Si extends Error{constructor(e){super(e),w(this,"name","MonorailProducerError"),w(this,"code","monorail_producer_error")}}function*Ai(){yield Re.Monorail.createHttpProducer({production:!0}),qr()&&(yield Re.Monorail.createLogProducer({debugMode:!0}))}const Pi=[...Ai()];function Ii(t){var e;return!(t instanceof Re.MonorailRequestError)&&!((e=t==null?void 0:t.message)!=null&&e.includes("Invalid agent:"))}async function Ti(t,e){if(Ei())return;S.leaveBreadcrumb("monorail event produced to ".concat(t.schemaId),t);const n=[];if(await Promise.all(Pi.map(async o=>{try{await o.produce(t)}catch(a){n.push(a)}})),n.length===0)return;const r=n.sort(o=>o instanceof Re.MonorailRequestError?1:-1)[0];if(e==null||e(r),Ii(r)){const o=r instanceof Error?r:new Si(Oi(r));S.notify(o)}}function Oi(t){try{return JSON.stringify(t)}catch(e){return t.toString()}}const Er="shopify_wallet_checkout_track/6.1";async function F(t,e){var n,r,o,a,i,s,c,u,l,m,f,p;(r=(n=window==null?void 0:window.ShopifyAnalytics)==null?void 0:n.lib)!=null&&r.trekkie||await new Promise(ue=>{const Be=setInterval(()=>{var Fe,Bn;(Bn=(Fe=window==null?void 0:window.ShopifyAnalytics)==null?void 0:Fe.lib)!=null&&Bn.trekkie&&(clearInterval(Be),ue())},100),ss=setTimeout(()=>{clearInterval(Be),clearTimeout(ss),ue()},7e3)});const b=(i=(a=(o=window.ShopifyAnalytics)==null?void 0:o.lib)==null?void 0:a.trekkie)==null?void 0:i.defaultAttributes,d={uniqToken:(s=b==null?void 0:b.uniqToken)!=null?s:"",visitToken:(c=b==null?void 0:b.visitToken)!=null?c:"",microSessionId:(u=b==null?void 0:b.microSessionId)!=null?u:"",microSessionCount:(l=b==null?void 0:b.microSessionCount)!=null?l:0,shopId:(m=b==null?void 0:b.shopId)!=null?m:0,themeId:b==null?void 0:b.themeId,themeCityHash:(f=b==null?void 0:b.themeCityHash)!=null?f:"",contentLanguage:(p=b==null?void 0:b.contentLanguage)!=null?p:"",referer:b==null?void 0:b.referer},{uniqToken:h,visitToken:y,microSessionId:v,microSessionCount:g,shopId:A,themeId:T,themeCityHash:N,contentLanguage:L,referer:q}=d,{event:J,eventSubtype:de,checkoutToken:Ce,instrumentId:Q,ttl:X}=t,zt={schemaId:Er,payload:{event:J,eventSubtype:de,checkoutToken:Ce,appName:"storefront",pageType:ga(),instrumentId:Q,ttl:X,uniqToken:h,visitToken:y,microSessionId:v,microSessionCount:g,shopId:A,themeId:T,themeCityHash:N,contentLanguage:L,referer:q,checkoutOne:!0}};if(!J){S.notify(new Error("Event is required"),{metadata:{request:{monorail:{schemaId:Er,payload:JSON.stringify(zt)}}}});return}await Ti(zt,e)}var P=(t=>(t.BuyItNow="BuyItNow",t.MoreOptions="MoreOptions",t.ApplePay="ApplePay",t.PayPal="PayPalV5",t.Venmo="Venmo",t.GooglePay="GooglePay",t.ShopPay="ShopifyPay",t.MetaPay="FacebookPay",t.BuyWithPrime="BuyWithPrime",t))(P||{}),k=(t=>(t.CartInitCalled="portable_wallets_cart_init_called",t.ClickSheetCancelled="portable_wallets_instrument_click_sheet_cancelled",t.ClickSheetFailed="portable_wallets_instrument_click_sheet_failure",t.ClickSheetSuccess="portable_wallets_instrument_click_sheet_success",t.InitCalled="portable_wallets_init_called",t.InitFailed="portable_wallets_init_failed",t.InitSuccess="portable_wallets_init_success",t.UpdateFailed="portable_wallets_instrument_update_failed",t.InstrumentLoaded="portable_wallets_instrument_loaded",t))(k||{});function Mi(t){const e=n=>{n.persisted&&(t(),window.removeEventListener("pageshow",e))};window.addEventListener("pageshow",e)}function Ni(){F({event:k.InitCalled})}function Di({result:t,eventType:e}){Z.counter({name:"portable_wallets_init_completed",value:1,attributes:{result:t,eventType:e}}),F({event:t==="success"?k.InitSuccess:k.InitFailed,eventSubtype:e})}function Ri({instrument:t,measurement:e}){e!=null&&Z.histogram({name:"portable_wallets_instrument_load_time",value:e,attributes:{instrument:t},unit:"ms"}),F({event:k.InstrumentLoaded,instrumentId:t,ttl:e})}function ki({instrument:t,result:e,checkoutToken:n}){Z.counter({name:"portable_wallets_sheet_clicked",value:1,attributes:{instrument:t,result:e}}),F({event:e==="success"?k.ClickSheetSuccess:k.ClickSheetFailed,checkoutToken:n,instrumentId:t})}function Li(t,e){F({event:"".concat(k.UpdateFailed,"-").concat(e),instrumentId:t})}function xi(t){Z.counter({name:"portable_wallets_sheet_cancelled",value:1,attributes:{instrument:t}}),F({event:k.ClickSheetCancelled,instrumentId:t})}function Ui(t){Z.counter({name:"portable_wallets_sheet_success",value:1,attributes:{instrument:t}}),Z.exportMetrics(),F({event:k.ClickSheetSuccess,instrumentId:t})}function $i(){window.setInterval(()=>{Z.exportMetrics()},1e3)}const I={initStarted:H(Ni),initCompleted:H(Di),instrumentLoaded:H(Ri),sheetClicked:H(ki),updateFailed:H(Li),sheetCancelled:H(xi),sheetSuccess:H(Ui),startExporter:H($i)};function H(t){return(...e)=>{try{t(...e)}catch(n){S.notify(n)}}}class Ci extends Error{constructor(e){super("[".concat(e.name,"] ").concat(e.message)),this.stack=e.stack,this.name="HandleCreateCartError"}}async function Vt({element:t,attribute:e,instrumentName:n,onError:r,dataSource:o}){t.setAttribute(e,"true");try{const a=await o.getCart();if(Mi(()=>{t&&t.removeAttribute(e)}),!a||!a.id)throw new Error("[".concat(n,"] received invalid cart"));if(!a.checkoutUrl)throw new Error("[".concat(n,"] Created cart with no checkout URL"));return a}catch(a){if(S.notify(new Ci(a)),I.sheetClicked({instrument:n,result:"failed"}),t.removeAttribute(e),r)return r==null||r(),null;throw a}}class Bi extends Le{constructor(){super(...arguments),w(this,"anchor")}static get observedAttributes(){return["disabled"]}async connectedCallback(){this.render()}attributeChangedCallback(e,n,r){n!==r&&e==="disabled"&&this.anchor&&(r?this.anchor.setAttribute("disabled","true"):this.anchor.removeAttribute("disabled"))}async handleClick(e){if(e.preventDefault(),this.disabled||!this.anchor||this.anchor.getAttribute("disabled"))return;const[n,r]=await Promise.all([this.i18n,this.dataSource]),o=await Vt({element:this.anchor,attribute:"disabled",instrumentName:P.MoreOptions,onError:()=>Ft(n.translate("error_dialogs.checkout.title"),n.translate("error_dialogs.checkout.generic_error")),dataSource:r});o&&this.redirectToCheckout(o.checkoutUrl)}async render(){this.anchor=document.createElement("a"),this.anchor.href="",this.anchor.textContent=(await this.i18n).translate("more_payment_options"),this.anchor.className=Ct.MORE_PAYMENT_OPTION_BUTTON,this.disabled&&this.anchor.setAttribute("disabled","true"),this.anchor.onclick=e=>this.handleClick(e),this.appendChild(this.anchor)}}class Fi extends Error{constructor({code:e,message:n}){super(n),w(this,"name","DeveloperError"),w(this,"code","unknown"),this.code=e}}class qi extends Error{constructor(){super(...arguments),w(this,"name","MissingConfigError")}}class Gt extends jr{get shopId(){return this.getAttribute("shop-id")}get cartId(){return this.getAttribute("cart-id")}get walletConfigs(){return this.getAttribute("wallet-configs")}get variantParams(){var e;try{return JSON.parse((e=this.getAttribute("variant-params"))!=null?e:"[]")}catch(n){throw new Fi({code:"invalid-variant-params",message:"variant-params must be a valid JSON string"})}}triggerLoadedEvent(){document.dispatchEvent(new Event("shopify:payment_button:loaded",{bubbles:!0,cancelable:!0}))}}const Me=Element.prototype,ji="once";function Sr(t){const e=bn(t);return gn(e)}function gn(t){var e;const n=t==null?void 0:t.elements;if(!n)return null;const r=We(n,"id");if(!r||isNaN(Number(r)))return null;const o=Number((e=We(n,"quantity"))!=null?e:"1"),a="gid://shopify/ProductVariant/".concat(r),i=We(n,"selling_plan"),s=i?"gid://shopify/SellingPlan/".concat(i):void 0,c=Gi(t);return{variantId:r,quantity:o,merchandiseId:a,sellingPlanId:s,lineItemProperties:c}}function bn(t){const e=Ar(t,"[data-shopify='payment-button']")||document.querySelector("[data-shopify='payment-button']");return Ar(e,"form")}function Vi(t){const e=t==null?void 0:t.elements;if(!e)return!1;const n=We(e,"sellingPlan-Group");return!!(n&&n!==ji)}function Gi(t){if(!t)return{};const e=document.querySelectorAll('[name^="properties"][form^="'.concat(t.getAttribute("id"),'"]')),n=t.querySelectorAll('[name^="properties"]'),r=[...e,...n],o={};return r.forEach(a=>{const i=Hi(a),s=Wi(a);i&&typeof s<"u"&&(o[i]=s)}),o}function Hi(t){const e=t.getAttribute("name");if(e===null)return null;const n=e.indexOf("["),r=e.lastIndexOf("]");return n===-1||r===-1?null:e.substring(n+1,r)}function Wi(t){if(!(["radio","checkbox"].includes(t.type)&&!t.checked)&&!(t.value===""||typeof t.value>"u"))return t.value}function We(t,e){var n;const r=t.namedItem(e);return r&&"value"in r&&(n=r.value)!=null?n:null}function Ar(t,e){if(Me.matches=Me.matches||Me.webkitMatchesSelector||Me.msMatchesSelector||Me.mozMatchesSelector,!t||t.matches(e))return t;let n=t;for(;n&&n!==document.body;)if(n=n.parentElement,n&&n.matches(e))return n;return null}class Ki{constructor(e,n,r){w(this,"addToCartMutationObserver"),w(this,"addToCartForm"),w(this,"addToCartButtons"),this.element=e,this.setComponentDisabled=n,this.setSubscriptionRequirement=r,this.addToCartMutationObserver=null,this.addToCartForm=null,this.addToCartButtons=[]}setupMutationObservers(){if(this.findAndSetAddToCartButtons(),!this.addToCartForm)return;this.syncComponentStateWithForm();const e=new MutationObserver(()=>this.reobserveOnFormChanges());this.addToCartMutationObserver=new MutationObserver(()=>this.syncComponentStateWithForm()),e.observe(this.addToCartForm,{childList:!0}),this.observeAddToCartButtons()}syncComponentStateWithForm(){if(!this.addToCartForm){this.setComponentDisabled(!0);return}const e=gn(this.addToCartForm),n=!!(this.addToCartButtons.length>0&&this.addToCartButtons.every(o=>o.disabled));this.setComponentDisabled(n||e===null);const r=Vi(this.addToCartForm);this.setSubscriptionRequirement(r)}observeAddToCartButtons(){this.addToCartButtons.forEach(e=>{this.addToCartMutationObserver.observe(e,{attributes:!0})})}reobserveOnFormChanges(){var e;(e=this.addToCartMutationObserver)==null||e.disconnect(),this.findAndSetAddToCartButtons(),this.observeAddToCartButtons(),this.syncComponentStateWithForm()}findAndSetAddToCartButtons(){this.addToCartForm=bn(this.element),this.addToCartForm&&(this.addToCartButtons=[...this.addToCartForm.querySelectorAll("[type=submit]")])}}class zi extends Le{constructor(){super(...arguments),w(this,"button",null),w(this,"buyNowText","")}static get observedAttributes(){return["disabled"]}async connectedCallback(){this.buyNowText=(await this.i18n).translate("instruments_copy.checkout.buy_now"),this.render()}attributeChangedCallback(e,n,r){super.attributeChangedCallback(e,n,r,this.button)}async handleClick(){if(this.disabled||!this.button||this.button.getAttribute("aria-disabled"))return;const[e,n]=await Promise.all([this.i18n,this.dataSource]),r=await Vt({element:this.button,attribute:"aria-disabled",instrumentName:P.BuyItNow,dataSource:n,onError:()=>Ft(e.translate("error_dialogs.checkout.title"),e.translate("error_dialogs.checkout.generic_error"))});r&&(I.sheetClicked({instrument:P.BuyItNow,checkoutToken:ba(r),result:"success"}),this.redirectToCheckout(r.checkoutUrl))}render(){var e;this.button||(this.button=document.createElement("button"),this.button.type="button"),this.button.textContent=this.buyNowText,this.button.className=Ct.UNBRANDED_BUTTON,this.disabled&&this.button.setAttribute("aria-disabled","true"),this.button.onclick=()=>this.handleClick(),this.appendChild(this.button),(e=this.onRendered)==null||e.call(this)}}class ht{constructor(e,n){w(this,"walletParams"),w(this,"options"),this.options=n,this.walletParams=e.wallet_params}static walletName(){throw new Error("Must define walletName for WalletInstrument subclass")}createWebComponent({accessToken:e,country:n,disabled:r="false",dataSource:o,i18n:a,apiClient:i,currency:s}){var c;const u=this.getWebComponentName();te(u,this.getWebComponentClass(),{isChildCustomElement:!0});const l=document.createElement(u),m={"access-token":e,"buyer-country":n,"buyer-currency":s,disabled:r,"wallet-params":JSON.stringify((c=this.walletParams)!=null?c:{})};for(const[f,p]of Object.entries(m))f&&l.setAttribute(f,p||"");return l.setDataSource(o),l.setApiClient(i),l.setI18n(a),l}loadWalletSDK(){return Promise.resolve()}getLoadEligibility(){return{eligible:!0}}getPartnerSDKEligibility(){return{eligible:!0}}}class Yi extends ht{static walletName(){return"buy_it_now"}getWebComponentName(){return"shopify-buy-it-now-button"}getInstrumentName(){return P.BuyItNow}getWebComponentClass(){return zi}}class Zi extends Le{constructor(){super(...arguments),w(this,"sdkButtonsComponent")}async connectedCallback(){var e,n;this.sdkButtonsComponent=(n=(e=window.paypal).Buttons)==null?void 0:n.call(e,{fundingSource:"paypal",style:{color:"gold",label:"paypal",height:54}}),this.render()}disconnectedCallback(){this.sdkButtonsComponent&&this.sdkButtonsComponent.close()}render(){var e;const n=document.createElement("div");(e=this.sdkButtonsComponent)==null||e.render(n),this.appendChild(n)}}const Ji="https://www.paypal.com/sdk/js",Qi="AftTXN0blRv0ltUpXOXhTWgUgyoMXw83iV54WUwm2VFXevA-_z4oWajYoxeWwZ-Y_mK1kxIBBXG0HqQ1";class Xi extends ht{static walletName(){return"paypal"}constructor(e){super(e)}getWebComponentName(){return"shopify-paypal-button"}getInstrumentName(){return P.PayPal}getWebComponentClass(){return Zi}loadWalletSDK(){const e=document.createElement("script"),n=new URL(Ji);return n.searchParams.set("client-id",Qi),n.searchParams.set("merchant-id",this.walletParams.merchantId),e.setAttribute("src",n.toString()),new Promise((r,o)=>{e.onload=()=>r(),e.onerror=a=>{document.body.removeChild(e),o(a)},document.body.appendChild(e)})}getLoadEligibility(){return{eligible:!0}}getPartnerSDKEligibility(){var e,n;return(n=(e=window==null?void 0:window.paypal)==null?void 0:e.Buttons)!=null&&n.call(e).isEligible()?{eligible:!0}:{eligible:!1,reason:"failed PayPal SDK eligibility check"}}}const eo=".apple-pay-button{background-size:100% 60%;background-repeat:no-repeat;background-position:50% 50%}@supports (-webkit-appearance: -apple-pay-button){.apple-pay-button{background-size:auto;background-repeat:repeat;background-position:0;-webkit-appearance:-apple-pay-button!important;-moz-appearance:-apple-pay-button!important;appearance:-apple-pay-button!important;-apple-pay-button-type:buy}.apple-pay-button-black{-apple-pay-button-style:black}.apple-pay-button-white{-apple-pay-button-style:white}}\n",Dt={UK:Y.Gb,JA:Y.Jp},vn=["AS","GU","MP","PR","VI"];vn.forEach(t=>{Dt[t]=Y.Us});function Ke(t){var e,n;const r=t.countryCode,o={firstName:t.givenName||void 0,lastName:t.familyName||void 0,address1:(e=t==null?void 0:t.addressLines)==null?void 0:e[0],address2:((n=t==null?void 0:t.addressLines)==null?void 0:n[1])||void 0,city:t.locality||void 0,postalCode:t.postalCode||void 0,zoneCode:t.administrativeArea||t.subLocality||void 0,countryCode:no(t.countryCode),phone:t.phoneNumber||void 0};return o.countryCode===Y.Hk&&(o.postalCode=void 0,o.zoneCode=t.postalCode),r&&vn.includes(r)&&(o.zoneCode=r),o.lastName||(o.lastName=o.firstName),o}function to(t){const e=Ke(t);return e.zip=e.postalCode,e.province=e.zoneCode,e.country=e.countryCode,delete e.postalCode,delete e.zoneCode,delete e.countryCode,e}function ro(t){return Object.values(Y).includes(t)}function no(t){if(!t)return Y.Zz;const e=t.toUpperCase();return ro(e)?e:Object.keys(Dt).includes(e)?Dt[e]:Y.Zz}function St(t,e){return ie(t,[e])[0]}function At({subtotal:t,selectedDeliveryOptions:e,duties:n,taxes:r,discountAllocations:o,i18n:a}){var i;const s=ie(a.translate("order_summary.subtotal"),[t]),c=ie(a.translate("order_summary.shipping"),e.map(f=>({amount:f.estimatedCost.amount}))),u=ie(a.translate("order_summary.duties"),[n]),l=ie(a.translate("order_summary.taxes"),[r]),m=(i=o==null?void 0:o.flatMap(f=>ie(a.translate("order_summary.discount"),[f.discountedAmount],!0)))!=null?i:[];return[...s,...c,...u,...l,...m]}function ie(t,e,n=!1){return e.filter(r=>(r==null?void 0:r.amount)&&(r==null?void 0:r.amount)!==0).map(r=>({label:t,amount:n?"-".concat(Ot(r.amount)):Ot(r.amount)}))}function ao(t){return t.map(e=>{var n;return{label:e.title,amount:Ot(e.estimatedCost.amount),identifier:e.handle,detail:(n=e.description)!=null?n:""}})}const Ne=async({paymentSheetAction:t,onProceed:e,terminateSession:n})=>{switch(t.action){case"abort":n();break;case"show_error":await e(t.errors);break;case"update":await e(t.errors);break;default:throw new Error('Missing handler for payment sheet action "'.concat(t.action,'"'))}};var E=(t=>(t.InvalidLanguage="Variable $language of type LanguageCode was provided invalid value",t.InvalidCountry="Variable $country of type CountryCode was provided invalid value",t.MissingCartId="Variable $cartId of type ID! was provided invalid value",t.BuyerIdentityInvalidCountry="Variable $buyerIdentity of type CartBuyerIdentityInput! was provided invalid value for countryCode",t.BuyerIdentityInvalidPhone="INVALID: buyerIdentity.phone",t.BuyerIdentityEmailRequired="BUYER_IDENTITY_EMAIL_REQUIRED",t.DeliveryFirstNameInvalid="DELIVERY_FIRST_NAME_INVALID",t.DeliveryFirstNameRequired="DELIVERY_FIRST_NAME_REQUIRED",t.DeliveryLastNameInvalid="DELIVERY_LAST_NAME_INVALID",t.DeliveryLastNameRequired="DELIVERY_LAST_NAME_REQUIRED",t.DeliveryAddress1Required="DELIVERY_ADDRESS1_REQUIRED",t.DeliveryAddress1Invalid="DELIVERY_ADDRESS1_INVALID",t.DeliveryAddress2Required="DELIVERY_ADDRESS2_REQUIRED",t.DeliveryAddress2Invalid="DELIVERY_ADDRESS2_INVALID",t.DeliveryCityRequired="DELIVERY_CITY_REQUIRED",t.DeliveryCityInvalid="DELIVERY_CITY_INVALID",t.DeliveryZoneNotFound="DELIVERY_ZONE_NOT_FOUND",t.DeliveryZoneRequiredForCountry="DELIVERY_ZONE_REQUIRED_FOR_COUNTRY",t.DeliveryPostalCodeInvalid="DELIVERY_POSTAL_CODE_INVALID",t.DeliveryInvalidPostalCodeForZone="DELIVERY_INVALID_POSTAL_CODE_FOR_ZONE",t.DeliveryInvalidPostalCodeForCountry="DELIVERY_INVALID_POSTAL_CODE_FOR_COUNTRY",t.DeliveryPostalCodeRequired="DELIVERY_POSTAL_CODE_REQUIRED",t.DeliveryCountryInvalid="INVALID: buyerIdentity.deliveryAddressPreferences.0.deliveryAddress.country",t.DeliveryPhoneNumberRequired="DELIVERY_PHONE_NUMBER_REQUIRED",t.DeliveryPhoneNumberInvalid="DELIVERY_PHONE_NUMBER_INVALID",t.MerchandiseOutOfStock="MERCHANDISE_OUT_OF_STOCK",t.UnacceptablePaymentsAmount="PAYMENTS_UNACCEPTABLE_PAYMENT_AMOUNT",t.DeliveryNotAvailable="DELIVERY_NO_DELIVERY_AVAILABLE",t))(E||{});const io=["abort","show_error","complete","update"];class oo{constructor(){w(this,"generatePrioritizedPaymentSheetAction",(e,n)=>{let r;const o=[],a=[],i=[],s=n.filter(u=>u!==E.UnacceptablePaymentsAmount).some(u=>e[u]!==void 0);for(const u of Object.keys(e))if(!(u===E.UnacceptablePaymentsAmount&&s)){const l=e[u]();l.effects&&a.push(...l.effects),l.action!=="complete"&&l.errors&&i.push(...l.errors),o.push(l)}const c=(u=>io.map(l=>u.find(m=>m.action===l)).find(l=>!!l))(o);return c&&(r=c,r.effects=a,r.action!=="complete"&&(r.errors=i)),r})}getMergedPaymentSheetAction({result:e,errorActions:n}){const r={};n.forEach(a=>{a.errors.forEach(i=>{e.errors.includes(i)&&(r[i]=a.generateAction)})});let o;for(const a of e.errors){const i=r[a];if(i){o=i();break}}return{firstPaymentSheetAction:o,prioritizedPaymentSheetAction:this.generatePrioritizedPaymentSheetAction(r,e.errors)}}getUnhandledErrors(e,n){const r=n.flatMap(o=>o.errors);return e.filter(o=>!r.includes(o))}}class so extends oo{constructor(e){super(),this.i18n=e}mapMutationResultToPaymentSheetAction(e,n){var r;const o=this.getErrorActions();if(this.getUnhandledErrors(e.errors,o).forEach(i=>{S.notify(new Error("[".concat(P.ApplePay,"] mutation result error not handled: ").concat(i)))}),((r=e.data)==null?void 0:r.deliveryOptions.length)===0&&n)return{action:"show_error",errors:[new ApplePayError("addressUnserviceable")]};const{firstPaymentSheetAction:a}=this.getMergedPaymentSheetAction({result:e,errorActions:o});return a||{action:"update",errors:[]}}mapCompletionResultToPaymentSheetAction(e){if(e.data===null)throw new Error("[".concat(P.ApplePay,"] completion returned null result"));switch(e.data.__typename){case"SubmitSuccess":return{action:"complete",redirectUrl:e.data.redirectUrl};case"SubmitAlreadyAccepted":case"SubmitThrottled":case"SubmitFailed":{const n=this.getErrorActions();this.getUnhandledErrors(e.errors,n).forEach(o=>{S.notify(new Error("[".concat(P.ApplePay,"] completion result error not handled: ").concat(o)))});const{prioritizedPaymentSheetAction:r}=this.getMergedPaymentSheetAction({result:e,errorActions:n});return r||{action:"abort"}}default:throw new Error("[".concat(P.ApplePay,"] unknown completion result type: ").concat(e.data.__typename))}}getErrorActions(){return[{errors:[E.InvalidLanguage],generateAction:()=>({action:"abort",effects:[()=>{S.notify(new Error("[".concat(P.ApplePay,"] mutation provided invalid language, aborting")))}]})},{errors:[E.InvalidCountry],generateAction:()=>({action:"abort",effects:[()=>{S.notify(new Error("[".concat(P.ApplePay,"] mutation provided invalid country, aborting")))}]})},{errors:[E.MissingCartId],generateAction:()=>({action:"abort",effects:[()=>{S.notify(new Error("[".concat(P.ApplePay,"] mutation provided invalid cart ID, aborting")))}]})},{errors:[E.UnacceptablePaymentsAmount],generateAction:()=>({action:"abort"})},{errors:[E.MerchandiseOutOfStock],generateAction:()=>({action:"abort"})},{errors:[E.DeliveryNotAvailable],generateAction:()=>({action:"show_error",errors:[new ApplePayError("addressUnserviceable")]})},{errors:[E.BuyerIdentityEmailRequired],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","emailAddress",this.i18n.translate("errors.missing.email"))]})},{errors:[E.DeliveryFirstNameRequired],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.i18n.translate("errors.missing.first_name"))]})},{errors:[E.DeliveryFirstNameInvalid],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.i18n.translate("errors.invalid.first_name"))]})},{errors:[E.DeliveryLastNameRequired],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.i18n.translate("errors.missing.last_name"))]})},{errors:[E.DeliveryLastNameInvalid],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","name",this.i18n.translate("errors.invalid.last_name"))]})},{errors:[E.DeliveryAddress1Required],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","addressLines",this.i18n.translate("errors.missing.address1"))]})},{errors:[E.DeliveryAddress1Invalid],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","addressLines",this.i18n.translate("errors.invalid.address1"))]})},{errors:[E.DeliveryAddress2Required],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","addressLines",this.i18n.translate("errors.missing.address2"))]})},{errors:[E.DeliveryAddress2Invalid],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","addressLines",this.i18n.translate("errors.invalid.address2"))]})},{errors:[E.DeliveryCityRequired],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","locality",this.i18n.translate("errors.missing.city"))]})},{errors:[E.DeliveryCityInvalid],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","locality",this.i18n.translate("errors.invalid.city"))]})},{errors:[E.DeliveryZoneRequiredForCountry],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","administrativeArea",this.i18n.translate("errors.missing.zone"))]})},{errors:[E.DeliveryZoneNotFound],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","administrativeArea",this.i18n.translate("errors.invalid.zone"))]})},{errors:[E.DeliveryPostalCodeRequired],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","postalCode",this.i18n.translate("errors.missing.postal_code"))]})},{errors:[E.DeliveryPostalCodeInvalid,E.DeliveryInvalidPostalCodeForZone,E.DeliveryInvalidPostalCodeForCountry],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","postalCode",this.i18n.translate("errors.invalid.postal_code"))]})},{errors:[E.DeliveryPhoneNumberRequired],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","phoneNumber",this.i18n.translate("errors.missing.phone"))]})},{errors:[E.DeliveryPhoneNumberInvalid,E.BuyerIdentityInvalidPhone],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","phoneNumber",this.i18n.translate("errors.invalid.phone"))]})},{errors:[E.BuyerIdentityInvalidCountry,E.DeliveryCountryInvalid],generateAction:()=>({action:"show_error",errors:[new ApplePayError("shippingContactInvalid","country",this.i18n.translate("errors.invalid.country"))]})}]}}const Pr=["name","postalAddress"];function co({shippingRequired:t,walletParams:e,buyerCurrency:n}){const{phoneRequired:r,emailRequired:o}=e,a=[...o?["email"]:[],...r?["phone"]:[]],i=t?[...Pr,...a]:a;return{countryCode:e.countryCode,currencyCode:n,merchantCapabilities:e.merchantCapabilities,supportedNetworks:e.supportedNetworks,total:{type:"pending",label:e.merchantName,amount:"1.00"},requiredBillingContactFields:Pr,requiredShippingContactFields:i,shippingType:e.shippingType}}const ft="GraphQL Client",Ir=0,Tr=3,wn="An error occurred while fetching from the API. Review 'graphQLErrors' for details.",_n="Response returned unexpected Content-Type:",En="An unknown error has occurred. The API did not return a data object or any errors in its response.",Rt={json:"application/json",multipart:"multipart/mixed"},Sn=1e3,lo=[429,503],An=/@(defer)\b/i,Or="\r\n",uo=/boundary="?([^=";]+)"?/i,Mr=Or+Or;function z(t,e=ft){return t.startsWith("".concat(e))?t:"".concat(e,": ").concat(t)}function se(t){return t instanceof Error?t.message:JSON.stringify(t)}function Nr(t){return t instanceof Error&&t.cause?t.cause:void 0}function Dr(t){return t.map(({errors:e})=>e).filter(e=>e&&e.length>0).flat()}function Pn({client:t,retries:e}){if(e!==void 0&&(typeof e!="number"||e<Ir||e>Tr))throw new Error("".concat(t,': The provided "retries" value (').concat(e,") is invalid - it cannot be less than ").concat(Ir," or greater than ").concat(Tr))}function D(t,e){return e&&(typeof e!="object"||Array.isArray(e)||typeof e=="object"&&Object.keys(e).length>0)?{[t]:e}:{}}function In(t,e){if(t.length===0)return e;const n={[t.pop()]:e};return t.length===0?n:In(t,n)}function Tn(t,e){return Object.keys(e||{}).reduce((n,r)=>(typeof e[r]=="object"||Array.isArray(e[r]))&&t[r]?(n[r]=Tn(t[r],e[r]),n):(n[r]=e[r],n),Array.isArray(t)?[...t]:_({},t))}function Rr(t){return t.reduce((e,n,r)=>r===0?_({},n):Tn(e,n),{})}function po({clientLogger:t,customFetchApi:e=fetch,client:n=ft,defaultRetryWaitTime:r=Sn,retriableCodes:o=lo}){const a=async(i,s,c)=>{const u=s+1,l=c+1;let m;try{if(m=await e(...i),t({type:"HTTP-Response",content:{requestParams:i,response:m}}),!m.ok&&o.includes(m.status)&&u<=l)throw new Error;return m}catch(f){if(u<=l){const p=m==null?void 0:m.headers.get("Retry-After");return await ho(p?parseInt(p,10):r),t({type:"HTTP-Retry",content:{requestParams:i,lastResponse:m,retryAttempt:s,maxRetries:c}}),a(i,u,c)}throw new Error(z("".concat(c>0?"Attempted maximum number of ".concat(c," network retries. Last message - "):"").concat(se(f)),n))}};return a}async function ho(t){return new Promise(e=>setTimeout(e,t))}function fo({headers:t,url:e,customFetchApi:n=fetch,retries:r=0,logger:o}){Pn({client:ft,retries:r});const a={headers:t,url:e,retries:r},i=mo(o),s=po({customFetchApi:n,clientLogger:i,defaultRetryWaitTime:Sn}),c=yo(s,a),u=go(c),l=wo(c);return{config:a,fetch:c,request:u,requestStream:l}}function mo(t){return e=>{t&&t(e)}}async function On(t){const{errors:e,data:n,extensions:r}=await t.json();return _(_(_({},D("data",n)),D("extensions",r)),e||!n?{errors:U(_({networkStatusCode:t.status,message:z(e?wn:En)},D("graphQLErrors",e)),{response:t})}:{})}function yo(t,{url:e,headers:n,retries:r}){return async(o,a={})=>{const{variables:i,headers:s,url:c,retries:u}=a,l=JSON.stringify({query:o,variables:i});Pn({client:ft,retries:u});const m=Object.entries(_(_({},n),s)).reduce((p,[b,d])=>(p[b]=Array.isArray(d)?d.join(", "):d.toString(),p),{}),f=[c!=null?c:e,{method:"POST",headers:m,body:l}];return t(f,1,u!=null?u:r)}}function go(t){return async(...e)=>{if(An.test(e[0]))throw new Error(z("This operation will result in a streamable response - use requestStream() instead."));try{const n=await t(...e),{status:r,statusText:o}=n,a=n.headers.get("content-type")||"";return n.ok?a.includes(Rt.json)?On(n):{errors:{networkStatusCode:r,message:z("".concat(_n," ").concat(a)),response:n}}:{errors:{networkStatusCode:r,message:z(o),response:n}}}catch(n){return{errors:{message:se(n)}}}}}function bo(t){return ne(this,null,function*(){if(t.body[Symbol.asyncIterator])try{for(var e=pe(t.body),n,r,o;n=!(r=yield new $(e.next())).done;n=!1)yield r.value.toString()}catch(a){o=[a]}finally{try{n&&(r=e.return)&&(yield new $(r.call(e)))}finally{if(o)throw o[0]}}else{const a=t.body.getReader(),i=new TextDecoder;let s;try{for(;!(s=yield new $(a.read())).done;)yield i.decode(s.value)}finally{a.cancel()}}})}function vo(t,e){return{[Symbol.asyncIterator](){return ne(this,null,function*(){try{let i="";try{for(var n=pe(t),r,o,a;r=!(o=yield new $(n.next())).done;r=!1){const s=o.value;if(i+=s,i.indexOf(e)>-1){const c=i.lastIndexOf(e),u=i.slice(0,c).split(e).filter(l=>l.trim().length>0).map(l=>l.slice(l.indexOf(Mr)+Mr.length).trim());u.length>0&&(yield u),i=i.slice(c+e.length),i.trim()==="--"&&(i="")}}}catch(s){a=[s]}finally{try{r&&(o=n.return)&&(yield new $(o.call(n)))}finally{if(a)throw a[0]}}}catch(i){throw new Error("Error occured while processing stream payload - ".concat(se(i)))}})}}}function wo(t){return async(...e)=>{var n;if(!An.test(e[0]))throw new Error(z("This operation does not result in a streamable response - use request() instead."));try{const r=await t(...e),{status:o,statusText:a}=r;if(!r.ok)throw new Error(a,{cause:r});const i=r.headers.get("content-type")||"";if(Object.values(Rt).every(f=>!i.includes(f)))throw new Error("".concat(_n," ").concat(i),{cause:r});if(i.includes(Rt.json))return{[Symbol.asyncIterator](){return ne(this,null,function*(){const f=yield new $(On(r));yield U(_({},f),{hasNext:!1})})}};const s=(i!=null?i:"").match(uo),c="--".concat(s?s[1]:"-");if(!((n=r.body)!=null&&n.getReader)&&!r.body[Symbol.asyncIterator])throw new Error("API multipart response did not return an iterable body",{cause:r});const u=bo(r);let l={},m;return{[Symbol.asyncIterator](){return ne(this,null,function*(){var f,p;try{let v=!0;try{for(var b=pe(vo(u,c)),d,h,y;d=!(h=yield new $(b.next())).done;d=!1){const A=h.value.map(N=>{try{return JSON.parse(N)}catch(L){throw new Error("Error in parsing multipart response - ".concat(se(L)))}}).map(N=>{const{data:L,incremental:q,hasNext:J,extensions:de,errors:Ce}=N;if(!q)return U(_(_({data:L||{}},D("errors",Ce)),D("extensions",de)),{hasNext:J});const Q=q.map(({data:X,path:zt,errors:ue})=>_({data:X&&zt?In(zt,X):{}},D("errors",ue)));return U(_({data:Q.length===1?Q[0].data:Rr([...Q.map(({data:X})=>X)])},D("errors",Dr(Q))),{hasNext:J})});m=(p=(f=A.find(N=>N.extensions))==null?void 0:f.extensions)!=null?p:m;const T=Dr(A);if(l=Rr([l,...A.map(({data:N})=>N)]),v=A.slice(-1)[0].hasNext,T.length>0)throw new Error(wn,{cause:{graphQLErrors:T}});if(Object.keys(l).length===0)throw new Error(En);yield U(_(_({},D("data",l)),D("extensions",m)),{hasNext:v})}}catch(g){y=[g]}finally{try{d&&(h=b.return)&&(yield new $(h.call(b)))}finally{if(y)throw y[0]}}if(v)throw new Error("Response stream terminated unexpectedly")}catch(v){const g=Nr(v);yield U(_(_({},D("data",l)),D("extensions",m)),{errors:U(_({message:z(se(v)),networkStatusCode:o},D("graphQLErrors",g==null?void 0:g.graphQLErrors)),{response:r}),hasNext:!1})}})}}}catch(r){return{[Symbol.asyncIterator](){return ne(this,null,function*(){const o=Nr(r);yield{errors:_(_({message:z(se(r))},D("networkStatusCode",o==null?void 0:o.status)),D("response",o)),hasNext:!1}})}}}}}const _o="mutation cartCreate($input:CartInput!$country:CountryCode$language:LanguageCode)@inContext(country:$country language:$language){cartCreate(input:$input){cart{id checkoutUrl cost{totalAmount{amount}}lines(first:10){edges{node{quantity cost{totalAmount{amount currencyCode}}}}}deliveryGroups(first:10){edges{node{id selectedDeliveryOption{estimatedCost{amount currencyCode}}deliveryOptions{code title description estimatedCost{amount currencyCode}handle}}}}}errors:userErrors{...on CartUserError{message field code}}}}",Eo="mutation cartBuyerIdentityUpdate($cartId:ID!$buyerIdentity:CartBuyerIdentityInput!$country:CountryCode$language:LanguageCode)@inContext(country:$country language:$language){cartBuyerIdentityUpdate(cartId:$cartId buyerIdentity:$buyerIdentity){cart{id buyerIdentity{deliveryAddressPreferences{...on MailingAddress{address1 address2 city zip province phone country firstName lastName}}}deliveryGroups(first:10){edges{node{id selectedDeliveryOption{code title description estimatedCost{amount currencyCode}}deliveryOptions{code title description estimatedCost{amount currencyCode}handle}}}}cost{subtotalAmount{amount currencyCode}totalAmount{amount currencyCode}totalTaxAmount{amount currencyCode}totalDutyAmount{amount currencyCode}}discountAllocations{discountedAmount{amount currencyCode}}lines(first:10){edges{node{quantity cost{totalAmount{amount currencyCode}}}}}}errors:userErrors{...on CartUserError{message field code}}}}",So="mutation cartSelectedDeliveryOptionsUpdate($cartId:ID!$selectedDeliveryOptions:[CartSelectedDeliveryOptionInput!]!$country:CountryCode=CA$language:LanguageCode=EN)@inContext(country:$country language:$language){cartSelectedDeliveryOptionsUpdate(cartId:$cartId selectedDeliveryOptions:$selectedDeliveryOptions){cart{id buyerIdentity{deliveryAddressPreferences{...on MailingAddress{address1 address2 city zip province phone country firstName lastName}}}deliveryGroups(first:10){edges{node{id selectedDeliveryOption{estimatedCost{amount currencyCode}handle}deliveryOptions{code title description estimatedCost{amount currencyCode}handle}}}}cost{subtotalAmount{amount currencyCode}totalAmount{amount}totalTaxAmount{amount currencyCode}totalDutyAmount{amount currencyCode}}discountAllocations{discountedAmount{amount currencyCode}}lines(first:10){edges{node{quantity cost{totalAmount{amount currencyCode}}}}}}errors:userErrors{...on CartUserError{message field code}}}}",Ao="mutation applePaySessionCreate{applePaySessionCreate{...@defer{applePaySession{body}}}}",Po="mutation cartSubmitForCompletion($cartId:ID!$attemptToken:String!$country:CountryCode$language:LanguageCode)@inContext(country:$country language:$language){cartSubmitForCompletion(cartId:$cartId attemptToken:$attemptToken){result{__typename ...on SubmitSuccess{redirectUrl}...on SubmitThrottled{pollAfterV2:pollAfter}...on SubmitFailed{errors{code message}}}errors:userErrors{...on CartUserError{code field message}}}}",Io="mutation cartPaymentUpdate($cartId:ID!$input:CartPaymentInput!$country:CountryCode$language:LanguageCode)@inContext(country:$country language:$language){cartPaymentUpdate(cartId:$cartId payment:$input){cart{id}errors:userErrors{...on CartUserError{message field code}}}}",To="query cartQuery($id:ID!$country:CountryCode$language:LanguageCode)@inContext(country:$country language:$language){cart(id:$id){id checkoutUrl cost{totalAmount{amount}}lines(first:10){edges{node{quantity cost{totalAmount{amount currencyCode}}}}}deliveryGroups(first:10){edges{node{id selectedDeliveryOption{estimatedCost{amount currencyCode}}deliveryOptions{code title description estimatedCost{amount currencyCode}handle}}}}}}",Oo="unstable";class mt{constructor({accessToken:e,country:n,locale:r,apiVersion:o=Oo}){if(w(this,"client"),w(this,"country"),w(this,"locale"),!e)throw new Error("StorefrontApiClient constructed with no access token");if(!n)throw new Error("StorefrontApiClient constructed with no buyer country");if(!r)throw new Error("StorefrontApiClient constructed with no locale");this.country=n,this.locale=r;const a="/api/".concat(o,"/graphql.json");this.client=fo({headers:{"Content-Type":"application/json",Accept:"application/json","X-Shopify-Storefront-Access-Token":e,"X-SDK-Variant":"portable-wallets"},url:a,retries:0,logger:i=>{if(i.type==="HTTP-Response"){const[s,c]=i.content.requestParams;S.leaveBreadcrumb("POST: ".concat(s),{statusCode:i.content.response.status,statusText:i.content.response.statusText,url:s,method:c==null?void 0:c.method,headers:c==null?void 0:c.headers,body:c==null?void 0:c.body},"request")}}})}async createCart(e){var n;const r=this.formatLanguage(this.locale),{errors:o,data:a}=await this.client.request(_o,{variables:{input:{lines:{merchandiseId:e.merchandiseId,quantity:e.quantity,sellingPlanId:e.sellingPlanId,attributes:Object.entries((n=e.lineItemProperties)!=null?n:{}).map(([i,s])=>({key:i,value:s}))},discountCodes:e.discountCodes},country:this.country,language:r}});if(o&&this.onError(o),a)return this.parseCartResponse(a.cartCreate.cart);throw new Error("createCart query returned nothing")}async updateCartBuyerIdentity(e){var n,r,o,a;const{cartId:i,emailAddress:s,streetAddress:c}=e,u="cartBuyerIdentityUpdate",l=this.formatLanguage(this.locale),m=await this.client.request(Eo,{variables:{cartId:i,country:this.country,language:l,buyerIdentity:{email:s,countryCode:c==null?void 0:c.countryCode,phone:c==null?void 0:c.phone,deliveryAddressPreferences:c?[{deliveryAddress:{address1:c.address1,address2:c.address2,city:c.city,zip:c.postalCode,province:c.zoneCode,phone:c.phone,country:c.countryCode,firstName:c.firstName,lastName:c.lastName}}]:void 0}}});return{data:(r=(n=m.data)==null?void 0:n[u])!=null&&r.cart?this.parseCartResponse((a=(o=m.data)==null?void 0:o[u])==null?void 0:a.cart):null,errors:this.parseMutationErrors(m,u)}}async updateSelectedDeliveryOptions(e,n){var r,o,a,i;const s="cartSelectedDeliveryOptionsUpdate",c=this.formatLanguage(this.locale),u=await this.client.request(So,{variables:{cartId:e,selectedDeliveryOptions:[{deliveryGroupId:n.deliveryGroupId,deliveryOptionHandle:n.deliveryOptionHandle}],country:this.country,language:c}});return{data:(o=(r=u.data)==null?void 0:r[s])!=null&&o.cart?this.parseCartResponse((i=(a=u.data)==null?void 0:a[s])==null?void 0:i.cart):null,errors:this.parseMutationErrors(u,s)}}async applePaySessionCreate(){var e,n,r;const o=await this.client.requestStream(Ao);try{for(var a=pe(o),i,s,c;i=!(s=await a.next()).done;i=!1){const u=s.value;u.errors&&this.onError(u.errors);const l=(r=(n=(e=u.data)==null?void 0:e.applePaySessionCreate)==null?void 0:n.applePaySession)==null?void 0:r.body;if(l)return l}}catch(u){c=[u]}finally{try{i&&(s=a.return)&&await s.call(a)}finally{if(c)throw c[0]}}throw new Error("No response")}async fetchCart(e){const n=this.formatLanguage(this.locale),{data:r}=await this.client.request(To,{variables:{id:e,country:this.country,language:n}});if(r)return this.parseCartResponse(r.cart);throw new Error("cartQuery returned nothing")}async updateCartPayment(e,n){var r,o,a,i;const s="cartUpdatePayment",c=this.formatLanguage(this.locale),u=await this.client.request(Io,{variables:{cartId:e,input:n,country:this.country,language:c}});return{data:(o=(r=u.data)==null?void 0:r[s])!=null&&o.cart?this.parseCartResponse((i=(a=u.data)==null?void 0:a[s])==null?void 0:i.cart):null,errors:this.parseMutationErrors(u,s)}}async submitForCompletion(e,n){var r,o;const a="cartSubmitForCompletion",i=this.formatLanguage(this.locale),s=await this.client.request(Po,{variables:{cartId:e,attemptToken:n,country:this.country,language:i}});return{data:(o=(r=s.data)==null?void 0:r[a])==null?void 0:o.result,errors:this.parseCompletionErrors(s)}}onError(e){if(!e)return;S.leaveBreadcrumb("GraphQL errors",e,"error");const n=e!=null&&e.networkStatusCode?"HTTP status ".concat(e.networkStatusCode):e.message;throw new Error("GraphQL query failed: ".concat(n))}formatLanguage(e){return e.includes("-")?e.split("-")[0].toUpperCase():e.toUpperCase()}parseCartResponse(e){const n=e.lines.edges.map(a=>{const i=a.node;return{quantity:i.quantity,totalAmount:{amount:i.cost.totalAmount.amount,currencyCode:i.cost.totalAmount.currencyCode}}}),r=[],o=[];return e.deliveryGroups.edges.forEach(a=>{const i=a.node.selectedDeliveryOption;o.push(this.buildDeliveryOption(i,a.node.id)),a.node.deliveryOptions.forEach(s=>{r.push(this.buildDeliveryOption(s,a.node.id))})}),{id:e.id,totalAmount:e.cost.totalAmount,subtotalAmount:e.cost.subtotalAmount,totalTaxAmount:e.cost.totalTaxAmount,totalDutyAmount:e.cost.totalDutyAmount,discountAllocations:e.discountAllocations,lineItems:n,deliveryOptions:r,selectedDeliveryOptions:o,checkoutUrl:e.checkoutUrl}}parseGraphQlErrors(e){var n,r;return(r=(n=e==null?void 0:e.graphQLErrors)==null?void 0:n.map(o=>o.message.replace(/\(Expected.*\)/,"").trim()))!=null?r:[]}parseMutationErrors(e,n){var r,o,a,i;const s=this.parseGraphQlErrors(e.errors),c=(i=(a=(o=(r=e.data)==null?void 0:r[n])==null?void 0:o.errors)==null?void 0:a.map(l=>l.field&&l.field.length>0?"".concat(l.code,": ").concat(l.field.join(".")):l.code))!=null?i:[],u=[...s,...c];return S.leaveBreadcrumb("GraphQL errors on mutation",u,"error"),u}parseCompletionErrors(e){var n,r,o,a;const i=this.parseGraphQlErrors(e.errors);let s=[];((o=(r=(n=e.data)==null?void 0:n.cartSubmitForCompletion)==null?void 0:r.result)==null?void 0:o.__typename)==="SubmitFailed"&&(s=(a=e.data.cartSubmitForCompletion.result.errors.map(u=>u.field&&u.field.length>0?"".concat(u.code,": ").concat(u.field.join(".")):u.code))!=null?a:[]);const c=[...i,...s];return S.leaveBreadcrumb("GraphQL errors on completion",c,"error"),c}buildDeliveryOption(e,n){return{title:e.title,estimatedCost:{amount:e.estimatedCost.amount,currencyCode:e.estimatedCost.currencyCode},handle:e.handle,deliveryGroupId:n,description:e.description}}}async function Pt({cartId:t,emailAddress:e,streetAddress:n,cartClient:r,instrumentName:o}){try{if(!t)throw new Error("[".concat(o,"] provided no cart ID when updating buyer identity"));if(!r)throw new Error("[".concat(o,"] provided invalid cart client when updating buyer identity"));return await r.updateCartBuyerIdentity({cartId:t,emailAddress:e,streetAddress:n})}catch(a){throw I.updateFailed(o,"updateBuyerIdentity"),a}}async function Mo({cartId:t,cartClient:e,instrumentName:n,selectedDeliveryOptions:r}){try{if(!t)throw new Error("[".concat(n,"] provided no cart ID when updating shipping method"));if(!e)throw new Error("[".concat(n,"] provided invalid cart client when updating shipping method"));return await e.updateSelectedDeliveryOptions(t,r)}catch(o){throw I.updateFailed(n,"updateSelectedDeliveryOptions"),o}}async function No({cartId:t,totalAmount:e,walletContent:n,cartClient:r,instrumentName:o}){try{if(!t)throw new Error("[".concat(o,"] provided no cart ID when updating payment"));if(!e)throw new Error("[".concat(o,"] provided no total amount when updating payment"));if(!n)throw new Error("[".concat(o,"] provided no apple pay wallet content when updating payment"));if(!r)throw new Error("[".concat(o,"] provided invalid cart client when updating payment"));return await r.updateCartPayment(t,{amount:e,walletPaymentMethod:{applePayWalletContent:n}})}catch(a){throw I.updateFailed(o,"updatePayment"),a}}async function Do({cartId:t,token:e,cartClient:n,instrumentName:r}){try{if(!t)throw new Error("[".concat(r,"] provided no cart ID when submitting for completion"));if(!n)throw new Error("[".concat(r,"] provided invalid cart client when submitting for completion"));if(!e)throw new Error("[".concat(r,"] provided no token when submitting for completion"));return await n.submitForCompletion(t,e)}catch(o){throw I.updateFailed(r,"submitForCompletion"),o}}class Ro{constructor({accessToken:e,buyerCountry:n,buyerCurrency:r,button:o,i18n:a,merchantName:i,dataSource:s,apiClient:c,walletParams:u}){w(this,"name",P.ApplePay),w(this,"accessToken"),w(this,"button"),w(this,"buyerCountry"),w(this,"cart"),w(this,"apiClient"),w(this,"dataSource"),w(this,"i18n"),w(this,"merchantName"),w(this,"session"),w(this,"paymentSheetActionGenerator"),w(this,"shippingRequired"),w(this,"begin",()=>{this.session.begin()}),w(this,"onvalidatemerchant",async()=>{try{const l=this.getMerchantSession(),m=await Vt({element:this.button,attribute:"aria-disabled",instrumentName:P.ApplePay,dataSource:this.dataSource});this.cart=m,this.session.completeMerchantValidation(await l)}catch(l){this.terminateSession(l)}}),w(this,"onshippingcontactselected",async l=>{var m;try{const f=Ke(l.shippingContact),p=await Pt({cartId:this.cart.id,streetAddress:f,cartClient:this.apiClient,instrumentName:this.name}),b=this.paymentSheetActionGenerator.mapMutationResultToPaymentSheetAction(p,this.shippingRequired);(m=b.effects)==null||m.forEach(d=>d()),Ne({paymentSheetAction:b,onProceed:d=>this.completeShippingContactSelection(p.data,d),terminateSession:this.terminateSession})}catch(f){this.terminateSession(f)}}),w(this,"onshippingmethodselected",async l=>{var m,f;try{const p=await Mo({cartId:this.cart.id,cartClient:this.apiClient,instrumentName:this.name,selectedDeliveryOptions:{deliveryGroupId:(m=this.cart.selectedDeliveryOptions[0])==null?void 0:m.deliveryGroupId,deliveryOptionHandle:l.shippingMethod.identifier}}),b=this.paymentSheetActionGenerator.mapMutationResultToPaymentSheetAction(p);(f=b.effects)==null||f.forEach(d=>d()),Ne({paymentSheetAction:b,onProceed:()=>this.completeShippingMethodSelection(p.data),terminateSession:this.terminateSession})}catch(p){this.terminateSession(p)}}),w(this,"onpaymentmethodselected",async l=>{var m;try{const{billingContact:f}=l.paymentMethod;if(!this.shippingRequired&&f){const p=Ke(f),b=await Pt({cartId:this.cart.id,streetAddress:p,cartClient:this.apiClient,instrumentName:this.name}),d=this.paymentSheetActionGenerator.mapMutationResultToPaymentSheetAction(b);(m=d.effects)==null||m.forEach(h=>h()),await Ne({paymentSheetAction:d,onProceed:()=>this.cart=b.data,terminateSession:this.terminateSession})}this.session.completePaymentMethodSelection({newTotal:St(this.merchantName,this.cart.totalAmount),newLineItems:At({subtotal:this.cart.subtotalAmount,selectedDeliveryOptions:this.cart.selectedDeliveryOptions,duties:this.cart.totalDutyAmount,taxes:this.cart.totalTaxAmount,discountAllocations:this.cart.discountAllocations,i18n:this.i18n})})}catch(f){this.terminateSession(f)}}),w(this,"oncancel",()=>{I.sheetCancelled(P.ApplePay),this.button.removeAttribute("aria-disabled")}),w(this,"onpaymentauthorized",async l=>{const m=async A=>{var T,N;switch((T=A.effects)==null||T.forEach(L=>L()),A.action){case"complete":{const L=ApplePaySession.STATUS_SUCCESS;try{await this.session.completePayment(L),I.sheetSuccess(P.ApplePay),window.location.assign(A.redirectUrl)}catch(q){this.terminateSession(q)}break}case"show_error":{const L=(N=A.errors)!=null?N:[],q={status:ApplePaySession.STATUS_FAILURE,errors:L};try{await this.session.completePayment(q)}catch(J){this.terminateSession(J)}break}case"abort":{try{await this.session.completePayment(ApplePaySession.STATUS_FAILURE)}catch(L){this.terminateSession(L)}break}default:this.terminateSession(new Error("[".concat(P.ApplePay,"] completion action not handled: ").concat(A.action)))}},{token:f,billingContact:p,shippingContact:b}=l.payment;let d=null,h=null;try{if(!p){await this.session.completePayment(ApplePaySession.STATUS_FAILURE);return}if(d=to(U(_({},p),{phoneNumber:b==null?void 0:b.phoneNumber})),this.shippingRequired){if(!b){await this.session.completePayment(ApplePaySession.STATUS_FAILURE);return}h=Ke(b)}}catch(A){this.terminateSession(A);return}const y=async()=>{try{const A=await Pt({cartId:this.cart.id,emailAddress:b.emailAddress,streetAddress:this.shippingRequired?h:void 0,cartClient:this.apiClient,instrumentName:this.name}),T=this.paymentSheetActionGenerator.mapMutationResultToPaymentSheetAction(A);await Ne({paymentSheetAction:T,onProceed:async N=>{N&&N.length>0?await this.session.completePayment({status:ApplePaySession.STATUS_FAILURE,errors:N}):await v()},terminateSession:this.terminateSession})}catch(A){this.terminateSession(A)}},v=async()=>{try{const A=await No({cartId:this.cart.id,totalAmount:this.cart.totalAmount,walletContent:{billingAddress:d,data:f.paymentData.data,header:f.paymentData.header,lastDigits:f.paymentMethod.displayName.split(" ")[1],signature:f.paymentData.signature,version:f.paymentData.version},cartClient:this.apiClient,instrumentName:this.name}),T=this.paymentSheetActionGenerator.mapMutationResultToPaymentSheetAction(A);await Ne({paymentSheetAction:T,onProceed:async N=>{N&&N.length>0?await this.session.completePayment({status:ApplePaySession.STATUS_FAILURE,errors:N}):await g()},terminateSession:this.terminateSession})}catch(A){this.terminateSession(A)}},g=async()=>{try{const A=await Do({cartId:this.cart.id,token:f.transactionIdentifier,cartClient:this.apiClient,instrumentName:this.name}),T=this.paymentSheetActionGenerator.mapCompletionResultToPaymentSheetAction(A);await m(T)}catch(A){this.terminateSession(A)}};await y()}),w(this,"terminateSession",l=>{l&&S.notify(l),this.session.abort();const m=this.i18n.translate("brand.apple_pay");Ft(this.i18n.translate("error_dialogs.wallet.title",{wallet:m}),this.i18n.translate("error_dialogs.wallet.generic_error",{wallet:m})),this.button.removeAttribute("aria-disabled")}),w(this,"getMostRecentNonNullCart",(l,m)=>l?(this.cart=l,l):m),w(this,"handleNullCart",l=>{if(!l)throw new Error("[".concat(P.ApplePay,"] no cart returned on mutation, aborting"))}),w(this,"completeShippingContactSelection",(l,m)=>{try{const f=this.getMostRecentNonNullCart(l,this.cart);this.session.completeShippingContactSelection({errors:m!=null?m:[],newTotal:St(this.merchantName,f.totalAmount),newLineItems:At({subtotal:f.subtotalAmount,selectedDeliveryOptions:f.selectedDeliveryOptions,duties:f.totalDutyAmount,taxes:f.totalTaxAmount,discountAllocations:f.discountAllocations,i18n:this.i18n}),newShippingMethods:ao(f.deliveryOptions)})}catch(f){this.terminateSession(f)}}),w(this,"completeShippingMethodSelection",l=>{try{this.handleNullCart(l),this.session.completeShippingMethodSelection({newTotal:St(this.merchantName,l.totalAmount),newLineItems:At({subtotal:l.subtotalAmount,selectedDeliveryOptions:l.selectedDeliveryOptions,duties:l.totalDutyAmount,taxes:l.totalTaxAmount,discountAllocations:l.discountAllocations,i18n:this.i18n})})}catch(m){this.terminateSession(m)}}),this.shippingRequired=s.shippingRequired(),this.session=new ApplePaySession(Ur,co({shippingRequired:this.shippingRequired,walletParams:u,buyerCurrency:r})),this.accessToken=e,this.buyerCountry=n,this.button=o,this.cart=null,this.apiClient=c,this.dataSource=s,this.i18n=a,this.merchantName=i,this.session.onvalidatemerchant=this.onvalidatemerchant,this.session.onshippingcontactselected=this.onshippingcontactselected,this.session.onshippingmethodselected=this.onshippingmethodselected,this.session.onpaymentmethodselected=this.onpaymentmethodselected,this.session.oncancel=this.oncancel,this.session.onpaymentauthorized=this.onpaymentauthorized,this.paymentSheetActionGenerator=new so(a)}async getMerchantSession(){const e=await new mt({accessToken:this.accessToken,country:this.buyerCountry,locale:this.i18n.locale,apiVersion:"unstable"}).applePaySessionCreate();return JSON.parse(e)}}const ko="button[name=add]";function Lo(){const t=document.querySelectorAll(ko);if(t.length===0)return null;const e=t[0].offsetHeight;return e<1?null:e}class xo extends Le{constructor(){super(...arguments),w(this,"fragment",null),w(this,"button",null),w(this,"cart",null)}static get observedAttributes(){return["disabled"]}get merchantName(){return this.walletParams.merchantName}async connectedCallback(){this.render()}attributeChangedCallback(e,n,r){super.attributeChangedCallback(e,n,r,this.button)}async handleClick(e){if(e.preventDefault(),this.disabled||!this.button||this.button.hasAttribute("aria-disabled"))return;const[n,r,o]=await Promise.all([this.i18n,this.dataSource,this.apiClient]);try{const a=new Ro({accessToken:this.accessToken,buyerCountry:this.buyerCountry,buyerCurrency:this.buyerCurrency,button:this.button,i18n:n,merchantName:this.merchantName,dataSource:r,apiClient:o,walletParams:this.walletParams});if(!a)throw new Error("missing ApplePaySession");a.begin(),I.sheetClicked({instrument:P.ApplePay,result:"success"})}catch(a){S.notify(a),I.sheetClicked({instrument:P.ApplePay,result:"failed"})}}async render(){var e,n;if(!this.button){const r=await this.i18n;this.button=document.createElement("button"),this.button.role="button",this.button.setAttribute("aria-label",r.translate("brand.apple_pay")),this.button.type="button",this.button.onclick=a=>this.handleClick(a),this.button.className="apple-pay-button ".concat(Ct.BRANDED_BUTTON),this.button.classList.add(this.backgroundIsDark()?"".concat(er.LIGHT):"".concat(er.DARK));const o=(e=Lo())!=null?e:aa;this.button.setAttribute("style","height: ".concat(o,"px"))}if(this.disabled&&this.button.setAttribute("aria-disabled","true"),!this.fragment){this.fragment=document.createDocumentFragment();const r=document.createElement("style");r.innerHTML=eo,this.fragment.append(r,this.button),this.appendChild(this.fragment),(n=this.onRendered)==null||n.call(this)}}}function Mn(t){return function(e,n,r){const o=r.value;return r.value=function(...a){const i=o.apply(this,a);return i.eligible||console.debug("[DEBUG] ".concat(t," could not be rendered. Reason: ").concat(i.reason)),i},r}}var Uo=Object.defineProperty,$o=Object.getOwnPropertyDescriptor,Nn=(t,e,n,r)=>{for(var o=r>1?void 0:r?$o(e,n):e,a=t.length-1,i;a>=0;a--)(i=t[a])&&(o=(r?i(e,n,o):i(o))||o);return r&&o&&Uo(e,n,o),o};class Ht extends ht{constructor(e,n){super(e,n),w(this,"companyFieldRequired"),w(this,"supportsSubscriptions"),this.companyFieldRequired=!!this.walletParams.companyRequired,this.supportsSubscriptions=!!this.walletParams.supportsSubscriptions}static walletName(){return"apple_pay"}getWebComponentName(){return"shopify-apple-pay-button"}getWebComponentClass(){return xo}getInstrumentName(){return P.ApplePay}applePayInIframe(){return typeof window>"u"||window.self!==window.top}getLoadEligibility(){var e;return this.applePayInIframe()?{eligible:!1,reason:"cannot be loaded in an iframe"}:(e=this.options)!=null&&e.hasSellingPlan&&!this.supportsSubscriptions?{eligible:!1,reason:"does not support subscriptions"}:{eligible:!0}}getPartnerSDKEligibility(){var e,n,r,o;return typeof window>"u"||window.ApplePaySession===void 0?{eligible:!1,reason:"window or ApplePaySession is undefined"}:(n=(e=window.ApplePaySession).supportsVersion)!=null&&n.call(e,Ur)?(o=(r=window.ApplePaySession).canMakePayments)!=null&&o.call(r)?{eligible:!0}:{eligible:!1,reason:"failed SDK eligibility check"}:{eligible:!1,reason:"SDK does not meet minimum version requirement"}}}Nn([Mn("Apple Pay")],Ht.prototype,"getLoadEligibility",1),Nn([Mn("Apple Pay")],Ht.prototype,"getPartnerSDKEligibility",1);const Co='<svg xmlns="http://www.w3.org/2000/svg" height=\'27px\' preserveAspectRatio="xMidYMid" viewBox="0 0 188 50" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M123.095 23.736c1.014 0 1.761-.338 2.242-1.015.479-.677.72-1.745.72-3.206 0-1.478-.236-2.555-.707-3.232s-1.223-1.015-2.255-1.015c-.942 0-1.83.24-2.663.72v7.027c.796.48 1.684.721 2.663.721Zm-5.951 8.148c-.236 0-.408-.05-.517-.147-.108-.098-.162-.272-.162-.52v-17.82c0-.249.054-.422.162-.52.109-.098.281-.147.517-.147h1.956c.417 0 .671.195.761.587l.19.695a6.03 6.03 0 0 1 1.97-1.23 6.387 6.387 0 0 1 2.351-.453c1.757 0 3.148.632 4.171 1.897 1.024 1.264 1.536 2.974 1.536 5.129 0 1.478-.254 2.77-.761 3.874-.508 1.104-1.196 1.954-2.066 2.55-.869.598-1.866.896-2.989.896a6.462 6.462 0 0 1-2.12-.347c-.67-.232-1.24-.552-1.711-.962v5.85c0 .25-.051.423-.149.52-.1.099-.277.148-.531.148h-2.608Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M133.418 26.381c-.235 0-.408-.053-.517-.16-.108-.108-.162-.276-.162-.508V13.397c0-.249.054-.422.162-.52.109-.098.282-.147.517-.147h1.957c.416 0 .67.196.76.587l.354 1.443c.724-.784 1.408-1.34 2.051-1.67a4.438 4.438 0 0 1 2.052-.494h.38c.254 0 .435.049.544.147.108.098.162.272.162.52v2.245c0 .231-.049.4-.149.507-.1.107-.276.161-.529.161-.127 0-.29-.01-.49-.027a9.036 9.036 0 0 0-.761-.027c-.416 0-.923.059-1.521.174a7.603 7.603 0 0 0-1.522.44v8.977c0 .232-.05.4-.149.508-.1.107-.277.16-.531.16h-2.608Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M144.276 26.381c-.235 0-.407-.053-.516-.16-.109-.108-.163-.276-.163-.508V13.397c0-.249.054-.422.163-.52.109-.098.281-.147.516-.147h2.609c.253 0 .43.049.529.147.1.098.15.271.15.52v12.316c0 .232-.05.4-.15.508-.099.107-.276.16-.529.16h-2.609Zm1.305-15.762c-.69 0-1.241-.187-1.658-.56-.417-.375-.625-.882-.625-1.524 0-.641.208-1.149.625-1.523.417-.374.968-.56 1.658-.56.688 0 1.24.186 1.657.56.417.374.625.882.625 1.523 0 .642-.208 1.15-.625 1.523-.417.374-.969.561-1.657.561Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M151.607 26.381c-.235 0-.408-.053-.516-.16-.109-.108-.163-.276-.163-.508V13.397c0-.249.054-.422.163-.52.108-.098.281-.147.516-.147h1.957c.416 0 .67.195.76.587l.218.721c.96-.623 1.825-1.063 2.595-1.322a7.427 7.427 0 0 1 2.378-.387c1.63 0 2.78.57 3.451 1.71.923-.606 1.794-1.042 2.608-1.31a8.063 8.063 0 0 1 2.528-.4c1.267 0 2.25.347 2.948 1.041.697.695 1.047 1.666 1.047 2.913v9.43c0 .232-.052.4-.15.508-.1.107-.278.16-.531.16h-2.608c-.235 0-.408-.053-.516-.16-.108-.108-.163-.276-.163-.508v-8.576c0-1.21-.553-1.816-1.658-1.816-.977 0-1.966.231-2.963.694v9.698c0 .232-.048.4-.148.508-.1.107-.276.16-.531.16h-2.608c-.236 0-.407-.053-.516-.16-.109-.108-.163-.276-.163-.508v-8.576c0-1.21-.553-1.816-1.657-1.816-1.015 0-2.011.24-2.99.721v9.671c0 .232-.05.4-.149.508-.1.107-.277.16-.53.16h-2.609Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M180.629 18.393c.923 0 1.594-.138 2.01-.414.417-.276.626-.699.626-1.269 0-1.122-.68-1.683-2.039-1.683-1.739 0-2.744 1.051-3.016 3.153.724.142 1.53.213 2.419.213Zm.897 8.388c-2.247 0-3.973-.604-5.178-1.816-1.204-1.21-1.806-2.947-1.806-5.21 0-2.314.614-4.131 1.847-5.45 1.232-1.317 2.945-1.976 5.137-1.976 1.684 0 3.001.4 3.953 1.202.95.801 1.427 1.87 1.427 3.205 0 1.336-.512 2.348-1.535 3.033-1.024.686-2.532 1.028-4.524 1.028-1.034 0-1.931-.097-2.692-.293.11 1.193.476 2.048 1.101 2.564.625.517 1.571.775 2.839.775.508 0 1.002-.031 1.482-.093.479-.063 1.146-.2 1.997-.415a1.141 1.141 0 0 1 .299-.053c.308 0 .461.205.461.614v1.23c0 .284-.04.485-.121.6-.082.116-.24.219-.476.308a11.838 11.838 0 0 1-4.211.747Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M180.103 41.388C172.355 47.011 161.121 50 151.447 50c-13.557 0-25.766-4.927-35.004-13.128-.726-.645-.079-1.524.793-1.025 9.968 5.702 22.294 9.137 35.025 9.137 8.589 0 18.029-1.753 26.716-5.376 1.31-.546 2.408.85 1.126 1.78Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M183.329 37.77c-.992-1.248-6.552-.592-9.05-.298-.756.09-.874-.56-.192-1.031 4.436-3.063 11.703-2.179 12.548-1.153.852 1.034-.224 8.198-4.38 11.617-.639.525-1.247.245-.963-.45.934-2.296 3.029-7.438 2.037-8.686Z" fill="#fff"/><path d="M5.265 25.806V7.924h6.426c1.72 0 3.105.438 4.155 1.316 1.066.877 1.6 2.021 1.6 3.432 0 .877-.207 1.634-.62 2.27-.395.62-.989 1.102-1.78 1.446 1.1.327 1.935.869 2.503 1.626.585.74.878 1.651.878 2.735 0 1.549-.577 2.779-1.73 3.69-1.152.913-2.7 1.369-4.645 1.369H5.265Zm3.665-7.793v5.032h3.045c1.755 0 2.632-.826 2.632-2.477 0-1.704-.938-2.555-2.813-2.555H8.93Zm0-7.33v4.698h2.245c1.669 0 2.503-.774 2.503-2.323 0-1.583-.766-2.374-2.297-2.374H8.93Zm21.157 15.123-.361-1.393c-1.532 1.187-3.132 1.78-4.8 1.78-1.17 0-2.082-.344-2.736-1.032-.654-.705-.98-1.669-.98-2.89v-9.652h3.767v8.594c0 1.393.602 2.09 1.807 2.09.894 0 1.771-.275 2.632-.826V12.62h3.768v13.188h-3.097Zm10.209.207-5.213-13.394h4l2.942 9.858 2.787-9.858h3.897l-5.574 14.968c-.5 1.36-1.11 2.34-1.833 2.942-.722.602-1.634.903-2.735.903-.86 0-1.695-.137-2.503-.413v-2.554c.55.051 1.04.077 1.47.077.723 0 1.282-.172 1.678-.516.396-.327.731-.903 1.007-1.73l.077-.283Zm27.841-.207-2.27-9.264-2.298 9.264h-3.638L55.724 12.62H59.7l2.193 9.523 2.374-9.523h3.38l2.427 9.549 2.064-9.549h3.871l-4.232 13.188h-3.639Zm9.932 0V12.62h3.768v13.188h-3.768Zm1.884-15.225c-.654 0-1.179-.181-1.574-.542-.396-.362-.594-.852-.594-1.471 0-.62.198-1.11.594-1.471.395-.362.92-.542 1.574-.542s1.178.18 1.574.542c.396.361.594.851.594 1.47 0 .62-.198 1.11-.594 1.472-.396.361-.92.542-1.574.542Zm13.444 14.89c-.93.361-1.97.542-3.123.542-1.462 0-2.546-.344-3.252-1.032-.688-.689-1.032-1.755-1.032-3.2v-6.374h-1.987v-2.323l2.09-.413.568-3.613h3.097v3.561h3.561v2.787h-3.561V21.6c0 .55.138.938.413 1.161.275.224.74.336 1.393.336a12.5 12.5 0 0 0 1.833-.155v2.529Zm10.775.335v-8.645c0-.705-.155-1.221-.464-1.548-.31-.327-.783-.49-1.42-.49-.946 0-1.883.292-2.813.877v9.806h-3.767V6.71h3.767v7.096c1.48-1.049 3.028-1.574 4.646-1.574 1.221 0 2.159.336 2.812 1.007.672.653 1.007 1.591 1.007 2.813v9.755h-3.768Z" fill="#fff"/></svg>\n',Bo=".buy-with-prime-button:hover:enabled{background-color:#0684eb!important}.buy-with-prime-button:focus{box-shadow:0 0 0 2px #1a98ff,inset 0 0 0 2px rgb(var(--color-background))!important;outline:none!important}.buy-with-prime-button:active,.buy-with-prime-button:hover:enabled:active{background-color:#0066cd!important;box-shadow:none!important}\n";class Fo extends Le{constructor(){super(...arguments),w(this,"fragment",null),w(this,"button",null)}async connectedCallback(){this.render()}disconnectedCallback(){}createButton(){const e=document.createElement("button");return e.type="button",e.className="buy-with-prime-button",e.style.width="100%",e.style.height="100%",e.style.paddingTop="15px",e.style.paddingBottom="8px",e.style.paddingRight="10px",e.style.paddingLeft="10px",e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="center",e.style.gap="5px",e.style.opacity="1",e.innerHTML="".concat(Co),e.disabled=!1,e.style.backgroundColor="#1A98FF",e.style.color="#FFFFFF",e.style.cursor="pointer",e}async handleClick(){var e,n;(n=(e=window.amazon)==null?void 0:e.buywithprime)==null||n.initCheckout({amazonPayOptions:this.walletParams})}render(){var e;if(this.button||(this.button=this.createButton(),this.button.onclick=()=>this.handleClick()),!this.fragment){this.fragment=document.createDocumentFragment();const n=document.createElement("style");n.innerHTML=Bo,this.fragment.append(n,this.button),this.appendChild(this.fragment)}(e=this.onRendered)==null||e.call(this)}}const qo={buywithprime:{initCheckout:async t=>{const e=window.location.origin.replace(/^https:\/\/shop\d\.shopify\./,"https://optimus."),n=t.amazonPayOptions.createCheckoutSessionConfig,r=JSON.parse(n.payloadJSON),o=new URL(r.webCheckoutDetails.checkoutReviewReturnUrl);await fetch("".concat(e,"/sandbox/v2/checkoutSessions"),{method:"POST",body:JSON.stringify(t.amazonPayOptions),headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}}),o.searchParams.set("amazonCheckoutSessionId","testCheckoutSessionId"),o.searchParams.set("promiseId","testPromiseId"),window.location.href=o.toString()}}},W=class Kt extends ht{static walletName(){return"buy_with_prime"}constructor(e){super(e)}getWebComponentName(){return"shopify-buy-with-prime-button"}getInstrumentName(){return P.BuyWithPrime}isSpinInstance(){return!1}getWebComponentClass(){return Fo}async loadWalletSDKAttempt(){return new Promise((e,n)=>{if(document.querySelector('script[src="'.concat(Kt.SDK_URL,'"]'))&&window.amazon){e();return}const r=document.createElement("script");r.src=Kt.SDK_URL,r.onload=()=>{e()},r.onerror=()=>{n(new Error("Error loading Amazon SDK"))},document.head.append(r)})}async loadWalletSDK(){let e=0;if(this.isSpinInstance()){await this.loadMockSDK();return}do try{await this.loadWalletSDKAttempt();break}catch(n){if(e++,e===Kt.MAX_RETRIES)throw n}while(e<Kt.MAX_RETRIES)}async loadMockSDK(){return window.amazon=qo,"loaded"}};w(W,"SDK_URL","https://static-na.payments-amazon.com/checkout.js"),w(W,"MAX_RETRIES",3);let kt=W;const jo=[Yi,Xi,Ht,kt],Vo=new Map(jo.map(t=>[t.walletName(),(e,n)=>new t(e,n)]));function Dn(t,e){const n=Vo.get(t.name);if(!n)throw new Error("Can't build wallet with name ".concat(t.name));return n(t,e)}function Rn(t,e){return t.map(n=>Dn(n,e))}var $e=(t=>(t.ButtonDisplay="buttonDisplay",t.LoadInstrument="loadInstrument",t))($e||{});function kn(){var t,e;return!!((t=window.performance)!=null&&t.mark)&&!!((e=window.performance)!=null&&e.measure)}function yt(t,e){return Go(t,e),()=>Ho(t,e)}function Go(t,e){kn()&&window.performance.mark("".concat(t,"-").concat(e,"-start"))}function Ho(t,e){var n,r;if(kn())try{const o="".concat(t,"-").concat(e,"-start"),a="".concat(t,"-").concat(e,"-end"),i="".concat(t,"-").concat(e,"-duration");window.performance.mark(a);const s=(r=window.performance.measure(i,o,a))!=null?r:(n=window.performance.getEntriesByName(i,"measure"))==null?void 0:n[0],c=s==null?void 0:s.duration;if(c==null){S.notify(new Error("Could not measure performance of ".concat(t," ").concat(e)),{severity:"warning"});return}return c}catch(o){S.notify(o);return}}const Ln="dynamic-checkout .wallet-button-fade-in,cart-wallet-buttons .wallet-button-fade-in{animation:animation-fade-in .3s cubic-bezier(.1,.79,1,1)}dynamic-checkout .shopify-payment-button__button,cart-wallet-buttons .shopify-payment-button__button{cursor:pointer}@keyframes animation-fade-in{0%{opacity:0}to{opacity:1}}button[aria-disabled=true]{opacity:.5;cursor:not-allowed}\n",Wo=".shopify-payment-button__button--hidden{visibility:hidden}.shopify-payment-button__button{border-radius:4px;border:none;box-shadow:0 0 0 0 transparent;color:#fff;cursor:pointer;display:block;font-size:1em;font-weight:500;line-height:1;text-align:center;width:100%;transition:background .2s ease-in-out}.shopify-payment-button__button[disabled]{opacity:.6;cursor:default}.shopify-payment-button__button--unbranded{background-color:#1990c6;padding:1em 2em}.shopify-payment-button__button--unbranded:hover:not([disabled]){background-color:#136f99}.shopify-payment-button__more-options{background:transparent;border:0 none;cursor:pointer;display:block;font-size:1em;margin-top:1em;text-align:center;width:100%}.shopify-payment-button__more-options:hover:not([disabled]){text-decoration:underline}.shopify-payment-button__more-options[disabled]{opacity:.6;cursor:not-allowed}.shopify-payment-button__button--branded{display:flex;flex-direction:column;min-height:44px;position:relative;z-index:1}.shopify-payment-button__button--branded .shopify-cleanslate{flex:1!important;display:flex!important;flex-direction:column!important}.shopify-payment-button__button.button.loading{position:relative;color:transparent}.shopify-payment-button__button.button.loading>.loading-overlay__spinner{top:50%;left:50%;transform:translate(-50%,-50%);position:absolute;height:100%;display:flex;align-items:center}.shopify-payment-button__button.button.loading>.loading-overlay__spinner .spinner{width:-moz-fit-content;width:-webkit-fit-content;width:fit-content}.button.loading>.loading-overlay__spinner .path{stroke:#fff}.shopify-payment-button__button .loading-overlay__spinner{width:1.8rem;display:inline-block}.shopify-payment-button__button .spinner{animation:shopify-rotator 1.4s linear infinite}@keyframes shopify-rotator{0%{transform:rotate(0)}to{transform:rotate(270deg)}}.shopify-payment-button__button .path{stroke-dasharray:280;stroke-dashoffset:0;transform-origin:center;stroke:#121212;animation:shopify-dash 1.4s ease-in-out infinite}@media screen and (forced-colors: active){.shopify-payment-button__button .path{stroke:CanvasText}}@keyframes shopify-dash{0%{stroke-dashoffset:280}50%{stroke-dashoffset:75;transform:rotate(135deg)}to{stroke-dashoffset:280;transform:rotate(450deg)}}@keyframes walletsLoadingSkeleton{50%{opacity:1}75%{opacity:.5}to{opacity:1}}.shopify-payment-button__skeleton{animation:walletsLoadingSkeleton 4s ease infinite;animation-delay:-.168s;background-color:#dedede;box-sizing:border-box}\n";function xn(t,e,n){if(De!=null&&De.length){const r=De.join(",");t.querySelectorAll(r).forEach(o=>{n===null?o.removeAttribute(e):o.setAttribute(e,n)})}}function Un(t,e){try{const n=JSON.parse(t!=null?t:"[]");if(!(n instanceof Array))throw new Error("[".concat(e,"] invalid walletConfigs found"));return n}catch(n){throw new Error("[".concat(e,"] Error while parsing walletConfigs JSON: ").concat(n))}}function Ko(t,e){try{return t?JSON.parse(t):null}catch(n){throw new Error("[".concat(e,"] Error while parsing walletConfig JSON: ").concat(n))}}function $n(t){return t.filter(e=>e.getLoadEligibility().eligible)}class zo{constructor(e,n,r,o){w(this,"element"),this.apiClient=n,this.instrumentName=r,this.variantParams=o,this.element=e()}async getCart(){const e=Sr(this.element);if(!e)return Promise.reject(new Error("[".concat(this.instrumentName,"] unable to find product form")));const n=$t(oa);return this.apiClient.createCart(U(_({},e),{discountCodes:n?[decodeURIComponent(n)]:[]}))}shippingRequired(){var e;const n=Sr(this.element);return!!((e=this.variantParams.find(r=>r.id===Number(n==null?void 0:n.variantId)))!=null&&e.requiresShipping)}}function Cn({instanceNumber:t,styleId:e,styles:n,cssFileName:r}){var o,a;t===1&&(a=(o=window.Shopify)==null?void 0:o.PaymentButton)!=null&&a.isStorefrontPortableWallets&&(Yo({styleId:e,styles:n,cssFileName:r})||Zo({styleId:e,styles:n}))}function Yo({styleId:t,styles:e,cssFileName:n}){return!!document.querySelector("style#".concat(t))}function Zo({styleId:t,styles:e}){const n=document.createElement("style");n.id=t,n.innerHTML=e,document.head.appendChild(n)}const Xe=class os extends Gt{constructor(){super(),w(this,"instanceNumber",++os.instanceCount),w(this,"formObserver"),w(this,"wrapper"),w(this,"i18n"),w(this,"dataSource"),w(this,"apiClient"),this.formObserver=new Ki(this,e=>this.disabled=e,e=>this.hasSellingPlan=e),Bt({shop:{shopId:this.shopId}}),Cn({instanceNumber:this.instanceNumber,styleId:"shopify-dynamic-checkout",styles:Wo,cssFileName:"dynamic-checkout-base.css"})}static get observedAttributes(){return["access-token","disabled","has-selling-plan"]}async connectedCallback(){var e;try{if((e=this.wrapper)!=null&&e.children.length)return;this.instanceNumber===1&&I.initStarted();const n=yt($e.ButtonDisplay,"dc:".concat(this.instanceNumber));this.i18n=rt(),this.apiClient=new mt({accessToken:this.accessToken,country:this.buyerCountry,locale:this.i18n.locale});const r=()=>(this.wrapper||(this.wrapper=document.createElement("div")),this.wrapper),o=await this.loadWallet();this.dataSource=new zo(r,this.apiClient,o.getInstrumentName(),this.variantParams);const a=o.createWebComponent({accessToken:this.accessToken,country:this.buyerCountry,currency:this.buyerCurrency,disabled:String(this.disabled),dataSource:this.dataSource,i18n:this.i18n,apiClient:this.apiClient});if(!a)throw new Error("[DynamicCheckout] No web component found");const i=o.getInstrumentName();a.onRendered=()=>{I.instrumentLoaded({instrument:i,measurement:n()})},this.render(a,i),this.formObserver.setupMutationObservers(),I.initCompleted({result:"success"}),this.instanceNumber===1&&this.triggerLoadedEvent()}catch(n){if(this.innerHTML="",n instanceof Error&&n.name==="DeveloperError"){const r=n;console.error(r),I.initCompleted({result:"failed",eventType:"[".concat(r.name,"]: ").concat(r.code)});return}I.initCompleted({result:"failed"}),S.notify(n)}}async attributeChangedCallback(e,n,r){if(n!==r&&(xn(this,e,r),e==="has-selling-plan")){const o=await this.loadWallet(),a=o.createWebComponent({accessToken:this.accessToken,country:this.buyerCountry,currency:this.buyerCurrency,disabled:String(this.disabled),dataSource:this.dataSource,i18n:this.i18n,apiClient:this.apiClient});if(!a)throw new Error("[DynamicCheckout] No web component found");this.render(a,o.getInstrumentName())}}render(e,n){var r,o;if(!this.wrapper)throw new Error("[DynamicCheckout] tried to render with no wrapper element");this.innerHTML="",this.wrapper=document.createElement("div");const a=document.createElement("style");if(a.innerHTML=Ln,this.wrapper.className="wallet-button-fade-in",this.wrapper.appendChild(e),n!==P.BuyItNow){const s=document.createElement("more-payment-options-link");s.setAttribute("buyer-country",(r=this.buyerCountry)!=null?r:""),s.setAttribute("access-token",(o=this.accessToken)!=null?o:""),s.setDataSource(this.dataSource),s.setI18n(this.i18n),s.setAttribute("disabled",String(this.disabled)),this.wrapper.appendChild(s)}const i=new DocumentFragment;i.appendChild(a),i.appendChild(this.wrapper),this.appendChild(i)}async loadWallet(){const e=Un(this.walletConfigs,"DynamicCheckout");return await Qo(e,{hasSellingPlan:this.hasSellingPlan})}};w(Xe,"instanceCount",0);let Lt=Xe;function Jo(t){var e;if(!qr())return null;const n=(e=ya())==null?void 0:e.toLowerCase();return n?t.find(r=>r.getInstrumentName().toLowerCase().includes(n)):null}async function Qo(t,e){var n;const r={name:"buy_it_now",wallet_params:{}};t.push(r);const o=$n(Rn(t,e)),a=(n=Jo(o))!=null?n:o[0];return await a.loadWalletSDK(),a.getPartnerSDKEligibility().eligible?a:o.find(i=>i.getInstrumentName()===P.BuyItNow)}te("dynamic-checkout",Lt),te("more-payment-options-link",Bi,{isChildCustomElement:!0});const Xo=".wallet-vertical-cart-grid,.wallet-horizontal-cart-grid{margin:0;padding:0;display:grid;grid-gap:1rem}.wallet-vertical-cart-grid{grid-auto-flow:row}.wallet-horizontal-cart-grid{grid-auto-flow:column}.wallet-vertical-cart-grid .wallet-cart-button,.wallet-horizontal-cart-grid .wallet-cart-button{min-width:140px;max-width:500px}.wallet-vertical-cart-grid .wallet-cart-button button,.wallet-horizontal-cart-grid .wallet-cart-button button{width:100%}\n";class es{constructor(e,n,r){this.cartToken=e,this.apiClient=n,this.requiresShipping=r}async getCart(){return this.apiClient.fetchCart("gid://shopify/Cart/".concat(this.cartToken))}shippingRequired(){return this.requiresShipping}}const et=class as extends Gt{constructor(){super(),w(this,"instanceNumber",++as.instanceCount),Bt({shop:{shopId:this.shopId,cartId:this.cartId}}),Cn({instanceNumber:this.instanceNumber,styleId:"shopify-dynamic-checkout-cart-grid",styles:Xo,cssFileName:"cart-wallet-buttons-base.css"})}static get observedAttributes(){return["access-token"]}async connectedCallback(){try{F({event:k.CartInitCalled});const e=yt($e.ButtonDisplay,"cart:".concat(this.instanceNumber));if(!this.walletConfigs)throw new Error("[CartWalletButtons] walletConfigs does not exist");const n=Un(this.walletConfigs,"CartWalletButtons");if(!(n instanceof Array))throw new Error("[CartWalletButtons] invalid walletConfigs found");const r=await ts(n,this.instanceNumber),o=rt(),a=new mt({accessToken:this.accessToken,country:this.buyerCountry,locale:o.locale}),i=$t("cart");if(i===null)throw new Error("[CartWalletButtons] cart cookie does not exist");const s=new es(i,a,!!this.hasAttribute("requires-shipping")),c=r.map(u=>u.createWebComponent({accessToken:this.accessToken,country:this.buyerCountry,currency:this.buyerCurrency,dataSource:s,i18n:o,apiClient:a}));if(c.length===0){this.innerHTML="";return}this.innerHTML="",this.render(c),F({event:k.InstrumentLoaded,instrumentId:"CartWalletButtons",ttl:e()})}catch(e){this.innerHTML="",S.notify(e)}}attributeChangedCallback(e,n,r){n!==r&&xn(this,e,r)}get layoutDirection(){const e=this.getAttribute("layout-direction");return e==="horizontal"||e==="vertical"?e:"horizontal"}render(e){const n=document.createElement("style");n.innerHTML=Ln;const r=document.createElement("div");r.className="wallet-button-fade-in wallet-".concat(this.layoutDirection,"-cart-grid"),e.forEach(a=>{a.classList.add("wallet-cart-button"),r.appendChild(a)});const o=new DocumentFragment;o.appendChild(n),o.appendChild(r),this.appendChild(o)}};w(et,"instanceCount",0);let xt=et;async function ts(t,e){const n=$n(Rn(t));return await Promise.all(n.map(async r=>{try{const o=r.getInstrumentName(),a=yt($e.LoadInstrument,"".concat(o,":").concat(e));await r.loadWalletSDK(),I.instrumentLoaded({instrument:o,measurement:a()})}catch(o){S.notify(o)}})),n.filter(r=>r.getPartnerSDKEligibility().eligible)}te("cart-wallet-buttons",xt);class rs{getCart(){throw new Error('[NoOpDataSource] Unexpected call to "getCart"')}shippingRequired(){throw new Error('[NoOpDataSource] Unexpected call to "shippingRequired"')}}const tt=class is extends Gt{constructor(){super(),w(this,"instanceNumber",++is.instanceCount),w(this,"i18n"),Bt({shop:{shopId:this.shopId}})}get walletConfig(){return this.getAttribute("wallet-config")}async connectedCallback(){try{if(this.children.length)return;this.instanceNumber===1&&I.initStarted();const e=yt($e.ButtonDisplay,"dc:".concat(this.instanceNumber)),n=Ko(this.walletConfig,"WalletButton");if(!n)throw new qi("[WalletButton] No config provided.");const r=Dn(n);if(!await this.eligibleToShow(r))return;const o=r.getInstrumentName();this.i18n=rt();const a=new mt({accessToken:this.accessToken,country:this.buyerCountry,locale:this.i18n.locale}),i=this.createWebComponent(r,this.i18n,a,o,e);this.innerHTML="",this.appendChild(i),I.initCompleted({result:"success"}),this.instanceNumber===1&&this.triggerLoadedEvent()}catch(e){this.innerHTML="",I.initCompleted({result:"failed"}),S.notify(e)}}createWebComponent(e,n,r,o,a){const i=e.createWebComponent({accessToken:this.accessToken,country:this.buyerCountry,currency:this.buyerCurrency,disabled:String(this.disabled),dataSource:new rs,i18n:n,apiClient:r});return i.onRendered=()=>{I.instrumentLoaded({instrument:o,measurement:a()})},i}async eligibleToShow(e){return!(!e.getLoadEligibility().eligible||(await e.loadWalletSDK(),!e.getPartnerSDKEligibility().eligible))}};w(tt,"instanceCount",0);let Ut=tt;te("shopify-wallet-button",Ut),ra(S),na(S),I.startExporter();
